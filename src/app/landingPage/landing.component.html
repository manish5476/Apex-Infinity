<div class="landing-root">
  <div class="mesh-bg"></div>

  <nav class="fixed top-0 left-0 w-full z-50 glass border-b border-[var(--border-primary)]/50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-20">
        <div class="flex items-center cursor-pointer" routerLink="/">
          <svg version="1.1" viewBox="0 0 1000 500" class="h-12 md:h-16 w-auto">
            <style type="text/css">
              .main-text { font-family: serif; font-weight: bold; font-size: 68px; fill: url(#text-gold-grad); filter: url(#dropShadow); }
              .tagline-text { font-family: sans-serif; font-size: 16px; letter-spacing: 6px; fill: #5D4037; text-transform: uppercase; font-weight: 600; }
              .divider-style { fill: none; stroke: #8C5E4A; stroke-width: 2; }
              .divider-diamond { fill: #8C5E4A; }
            </style>
            <defs>
              <linearGradient id="text-gold-grad" gradientUnits="userSpaceOnUse" x1="300" y1="400" x2="700" y2="400">
                <stop offset="0" style="stop-color:#8B5A2B"/>
                <stop offset="0.5" style="stop-color:#FCE6C9"/>
                <stop offset="1" style="stop-color:#8B5A2B"/>
              </linearGradient>
              <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
                <feOffset dx="2" dy="2" result="offsetblur"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <g transform="translate(500, 380)">
              <text x="0" y="50" text-anchor="middle" class="main-text">APEX-INFINITY</text>
              <g transform="translate(0, 70)">
                <line x1="-120" y1="0" x2="-15" y2="0" class="divider-style"/>
                <rect x="-6" y="-6" width="12" height="12" transform="rotate(45)" class="divider-diamond"/>
                <line x1="15" y1="0" x2="120" y2="0" class="divider-style"/>
              </g>
              <text x="0" y="100" text-anchor="middle" class="tagline-text">EMPOWERING INNOVATION</text>
            </g>
          </svg>
        </div>

        <div class="hidden md:flex gap-8 text-sm font-medium text-[var(--text-secondary)]">
          <a href="#features" class="hover:text-[var(--text-primary)] transition-colors hover:scale-105 transform">Features</a>
          <a href="#pricing" class="hover:text-[var(--text-primary)] transition-colors hover:scale-105 transform">Pricing</a>
        </div>

        <div class="flex items-center gap-4">
          <div class="relative group hidden sm:block">
            <button class="flex items-center gap-2 text-sm font-medium text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition">
              <i class="pi pi-palette"></i> Theme
            </button>
            <div class="absolute right-0 top-full mt-2 w-40 bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-lg shadow-xl overflow-hidden hidden group-hover:block max-h-64 overflow-y-auto z-50">
              @for(theme of availableThemes; track theme.name) {
                <button (click)="selectTheme(theme.class)" class="w-full text-left px-4 py-2 text-sm text-[var(--text-secondary)] hover:bg-[var(--component-bg-hover)] hover:text-[var(--text-primary)]">
                  {{ theme.name }}
                </button>
              }
            </div>
          </div>
          <a routerLink="/auth/login" class="hidden sm:block text-[var(--text-secondary)] hover:text-[var(--text-primary)] text-sm font-medium transition-all hover:scale-105 cursor-pointer">Log in</a>
          <a routerLink="/auth/org" class="px-6 py-2.5 bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-white rounded-lg text-sm font-bold hover:shadow-2xl hover:shadow-[var(--accent-primary)]/50 transition-all hover:scale-105 animate-shimmer cursor-pointer">
            Start Free Trial
          </a>
        </div>
      </div>
    </div>
  </nav>

  <div class="pt-32 pb-20 px-4 text-center">
    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[var(--bg-secondary)] border border-[var(--accent-primary)]/30 text-[var(--accent-primary)] text-xs font-semibold tracking-wide mb-8 animate-float shadow-xl shadow-[var(--accent-primary)]/20">
      <span class="relative flex h-2 w-2">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-[var(--accent-primary)] opacity-75"></span>
        <span class="relative inline-flex rounded-full h-2 w-2 bg-[var(--accent-primary)]"></span>
      </span>
      New: Real-time Chat & Broadcast Features Live!
    </div>

    <h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tight mb-8 leading-[1.1] text-balance text-[var(--text-primary)]">
      Run your business with <br />
      <span class="animate-gradient">pure intelligence.</span>
    </h1>
    <p class="text-[var(--text-tertiary)] text-lg md:text-xl max-w-2xl mx-auto mb-10 leading-relaxed text-pretty">
      Stop guessing. Start knowing. The only ERP that combines Finance, Inventory, CRM, and <span class="text-[var(--accent-primary)] font-semibold">Team Communication</span> with predictive AI.
    </p>

    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-20">
      <a routerLink="/auth/org" class="group px-8 py-4 bg-gradient-to-r from-[var(--accent-primary)] via-[var(--accent-secondary)] to-[var(--accent-tertiary)] rounded-xl font-bold text-lg text-white hover:scale-105 transition-all duration-300 shadow-2xl flex items-center gap-2 cursor-pointer">
        Start Free Trial <i class="pi pi-arrow-right group-hover:translate-x-1 transition-transform"></i>
      </a>
      <button class="group px-8 py-4 glass rounded-xl font-bold text-lg text-[var(--text-primary)] hover:bg-[var(--glass-bg-c)] transition-all flex items-center gap-2 border border-[var(--border-primary)]">
        <i class="pi pi-play-circle group-hover:scale-110 transition-transform text-[var(--accent-primary)]"></i> Watch Demo
      </button>
    </div>

    <div class="hero-3d-container max-w-6xl mx-auto px-4 reveal">
      <div class="hero-3d-element bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-2xl overflow-hidden shadow-2xl relative backdrop-blur-sm">
        <div class="h-10 bg-[var(--bg-ternary)] border-b border-[var(--border-primary)] flex items-center px-4 gap-2">
          <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
          <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
          <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
          <div class="ml-4 px-3 py-1 bg-[var(--bg-primary)] rounded-md text-xs text-[var(--text-tertiary)] font-mono">apex-infinity.app/dashboard</div>
        </div>
        <div class="relative bg-gradient-to-br from-[var(--bg-primary)] via-[var(--bg-secondary)] to-[var(--accent-primary)]/10 aspect-video flex items-center justify-center group">
          <div class="grid grid-cols-12 gap-4 p-8 w-full h-full opacity-90">
             <div class="col-span-2 bg-[var(--bg-ternary)]/50 rounded-lg h-full border border-[var(--border-secondary)]"></div>
             <div class="col-span-10 grid grid-cols-3 gap-4">
               <div class="col-span-3 h-16 flex justify-between items-center mb-4">
                 <div class="h-8 w-48 bg-[var(--bg-ternary)]/50 rounded animate-pulse"></div>
                 <div class="h-8 w-24 bg-gradient-to-r from-[var(--accent-primary)]/50 to-[var(--accent-secondary)]/50 rounded animate-pulse"></div>
               </div>
               <div class="col-span-1 h-32 bg-[var(--bg-ternary)]/50 rounded-xl border border-[var(--border-secondary)]"></div>
               <div class="col-span-1 h-32 bg-[var(--bg-ternary)]/50 rounded-xl border border-[var(--border-secondary)]"></div>
               <div class="col-span-1 h-32 bg-[var(--bg-ternary)]/50 rounded-xl border border-[var(--border-secondary)]"></div>
               <div class="col-span-2 h-64 bg-[var(--bg-ternary)]/50 rounded-xl border border-[var(--border-secondary)] mt-4"></div>
             </div>
          </div>
          <div class="absolute top-1/4 right-10 glass px-6 py-4 rounded-xl animate-float shadow-2xl border border-[var(--accent-primary)]/20 backdrop-blur-md">
            <div class="flex items-center gap-3">
              <div class="p-2 bg-green-500/20 rounded-lg text-green-400"><i class="pi pi-chart-line" style="font-size: 1.5rem"></i></div>
              <div>
                <div class="text-xs text-[var(--text-tertiary)]">Revenue Forecast</div>
                <div class="text-xl font-bold font-display text-[var(--text-primary)]">+24.5%</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="features" class="max-w-7xl mx-auto px-4 py-20">
    <div class="text-center mb-12 reveal">
      <h2 class="text-4xl font-bold text-[var(--text-primary)] mb-4">The Complete Feature Suite</h2>
      <p class="text-[var(--text-secondary)]">Search through our comprehensive module list.</p>
    </div>

    <div class="mb-10 reveal">
      <div class="relative w-full md:max-w-md mx-auto mb-6 group">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <i class="pi pi-search text-[var(--text-tertiary)]"></i>
        </div>
        <input 
          type="text" 
          [ngModel]="searchQuery()" 
          (ngModelChange)="searchQuery.set($event)" 
          placeholder="Search capabilities..." 
          class="w-full pl-12 pr-4 py-3 bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)] text-[var(--text-primary)] transition-all">
      </div>

      <div class="flex flex-wrap justify-center gap-2">
        @for (cat of categories(); track cat) {
          <button 
            (click)="setCategory(cat)" 
            class="px-4 py-2 rounded-full text-sm font-medium transition-all border cursor-pointer select-none"
            [class.bg-gradient-to-r]="selectedCategory() === cat"
            [class.from-[var(--accent-primary)]]="selectedCategory() === cat"
            [class.to-[var(--accent-secondary)]]="selectedCategory() === cat"
            [class.text-white]="selectedCategory() === cat"
            [class.border-transparent]="selectedCategory() === cat"
            [class.bg-[var(--bg-secondary)]]="selectedCategory() !== cat"
            [class.text-[var(--text-secondary)]]="selectedCategory() !== cat">
            {{ cat }} 
            <span class="ml-1 opacity-70 text-xs">({{ getCategoryCount(cat) }})</span>
          </button>
        }
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
      @for (f of filteredFeatures(); track f.title) {
        <div class="reveal glass-enhanced p-6 rounded-xl group hover:-translate-y-1 transition-all duration-300 hover:shadow-xl cursor-pointer bg-[var(--bg-secondary)]">
          <div class="flex justify-between items-start mb-4">
            <div class="p-3 bg-[var(--bg-ternary)] rounded-lg text-[var(--accent-primary)] group-hover:bg-gradient-to-br group-hover:from-[var(--accent-primary)] group-hover:to-[var(--accent-secondary)] group-hover:text-white transition-all duration-300">
              <i class="pi" [ngClass]="f.icon" style="font-size: 1.25rem"></i>
            </div>
            <span class="text-[10px] uppercase font-bold tracking-wider text-[var(--text-label)] border border-[var(--border-primary)] px-2 py-1 rounded bg-[var(--bg-ternary)]">{{ f.group }}</span>
          </div>
          <h3 class="text-[var(--text-primary)] font-semibold text-base mb-2">{{ f.title }}</h3>
          <p class="text-[var(--text-tertiary)] text-xs leading-relaxed">{{ f.desc }}</p>
        </div>
      } @empty {
        <div class="col-span-full text-center py-20 reveal">
          <i class="pi pi-search-minus text-[var(--text-tertiary)] text-4xl mb-4"></i>
          <h3 class="text-xl font-bold text-[var(--text-primary)]">No features found</h3>
        </div>
      }
    </div>
  </div>

  <div id="pricing" class="max-w-5xl mx-auto px-4 py-20">
    <div class="text-center mb-12 reveal">
      <h2 class="text-4xl font-bold text-[var(--text-primary)] mb-4">Simple, Transparent Pricing</h2>
      
      <div class="flex items-center justify-center gap-4 mt-8">
        <span class="text-sm font-medium text-[var(--text-secondary)]">Monthly</span>
        <button (click)="togglePricing()" class="w-14 h-8 rounded-full p-1 transition-colors relative shadow-lg" [class.bg-gradient-to-r]="isYearly()" [class.from-[var(--accent-primary)]]="isYearly()" [class.to-[var(--accent-secondary)]]="isYearly()" [class.bg-[var(--border-primary)]]="!isYearly()">
          <div class="w-6 h-6 bg-white rounded-full transition-transform transform shadow-md" [class.translate-x-6]="isYearly()"></div>
        </button>
        <span class="text-sm font-medium text-[var(--text-primary)]">Yearly <span class="text-green-400 text-xs ml-1 font-bold px-2 py-1 bg-green-500/10 rounded-full">Save 20%</span></span>
      </div>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      <div class="reveal glass-enhanced p-8 rounded-2xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]">
        <h3 class="text-lg font-bold text-[var(--text-secondary)] mb-2">Starter</h3>
        <div class="text-4xl font-bold mb-6 text-[var(--text-primary)]">
          {{ isYearly() ? '$39' : '$49' }}<span class="text-lg text-[var(--text-tertiary)] font-normal">/mo</span>
        </div>
        <button routerLink="/auth/org" class="w-full py-3 bg-[var(--bg-ternary)] hover:bg-[var(--border-primary)] text-[var(--text-primary)] rounded-lg font-bold transition-all mb-8 border border-[var(--border-primary)]">Start Free Trial</button>
        <ul class="space-y-4 text-sm text-[var(--text-secondary)]">
          <li class="flex items-center gap-3"><i class="pi pi-check text-green-500"></i> Single Branch</li>
          <li class="flex items-center gap-3"><i class="pi pi-check text-green-500"></i> 5 Users</li>
        </ul>
      </div>

      <div class="reveal p-8 rounded-2xl border-2 border-[var(--accent-primary)] bg-[var(--bg-primary)] relative transform md:-translate-y-4 shadow-2xl">
        <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-white text-xs font-bold px-4 py-2 rounded-full shadow-lg">MOST POPULAR</div>
        <h3 class="text-lg font-bold text-[var(--accent-primary)] mb-2">Growth</h3>
        <div class="text-4xl font-bold mb-6 text-[var(--text-primary)]">
          {{ isYearly() ? '$119' : '$149' }}<span class="text-lg text-[var(--text-tertiary)] font-normal">/mo</span>
        </div>
        <button routerLink="/auth/org" class="w-full py-3 bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-white rounded-lg font-bold transition-all mb-8 shadow-lg">Get Started</button>
        <ul class="space-y-4 text-sm text-[var(--text-secondary)]">
          <li class="flex items-center gap-3"><i class="pi pi-check text-[var(--accent-primary)]"></i> Multi-Branch (Up to 5)</li>
          <li class="flex items-center gap-3"><i class="pi pi-check text-[var(--accent-primary)]"></i> <strong>AI Forecasting</strong></li>
          <li class="flex items-center gap-3"><i class="pi pi-check text-[var(--accent-primary)]"></i> <strong>Unlimited Chat</strong></li>
        </ul>
      </div>
      
      <div class="reveal glass-enhanced p-8 rounded-2xl bg-[var(--bg-secondary)] border border-[var(--border-primary)]">
        <h3 class="text-lg font-bold text-[var(--text-secondary)] mb-2">Enterprise</h3>
        <div class="text-4xl font-bold mb-6 text-[var(--text-primary)]">Custom</div>
        <button class="w-full py-3 bg-[var(--text-primary)] text-[var(--bg-primary)] hover:opacity-90 rounded-lg font-bold transition-all mb-8">Contact Sales</button>
        <ul class="space-y-4 text-sm text-[var(--text-secondary)]">
          <li class="flex items-center gap-3"><i class="pi pi-check text-green-500"></i> Unlimited Branches</li>
          <li class="flex items-center gap-3"><i class="pi pi-check text-green-500"></i> Dedicated Server</li>
        </ul>
      </div>
    </div>
  </div>

  <footer class="border-t border-[var(--border-primary)] bg-[var(--bg-secondary)] py-12 text-center text-[var(--text-tertiary)] text-sm">
    <p>&copy; 2025 Apex-Infinity Inc. All rights reserved.</p>
  </footer>
</div>
