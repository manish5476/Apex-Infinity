<!-- 
  REFACTORED:
  - Using consistent .list-page-container layout
  - Using .themed-card instead of .glass-card
  - Set gridHeight="100%"
  - Corrected routerLink on button
-->
<div class="list-page-container">
  <!-- HEADER -->
  <div class="list-header">
    <h2 class="list-title">
      <i class="pi pi-box text-[var(--accent-primary)]"></i>
      Product Management
    </h2>
    <p-button 
      label="New Product" 
      icon="pi pi-plus" 
      routerLink="create"> <!-- Corrected: relative routerLink -->
    </p-button>
  </div>

  <!-- FILTER BAR -->
  <div class="themed-card">
    <div class="se-filter-bar">

      <!-- Name -->
      <div class="se-filter-field">
        <label for="name">Product Name</label>
        <input id="name" type="text" pInputText [(ngModel)]="productFilter.name" placeholder="Search by name" />
      </div>

      <!-- SKU -->
      <div class="se-filter-field">
        <label for="sku">SKU</label>
        <input id="sku" type="text" pInputText [(ngModel)]="productFilter.sku" placeholder="Search by SKU" />
      </div>

      <!-- Brand -->
      <div class="se-filter-field">
        <label for="brand">Brand</label>
        <p-select  appendTo="body" id="brand" [options]="brandOptions()" [(ngModel)]="productFilter.brand" [filter]="true"
          optionLabel="name" optionValue="_id" [showClear]="true" placeholder="Select Brand" appendTo="body">
        </p-select>
      </div>

      <!-- Category -->
      <div class="se-filter-field">
        <label for="category">Category</label>
        <p-select  appendTo="body" id="category" [options]="categoryOptions()" [(ngModel)]="productFilter.category" [filter]="true"
          optionLabel="name" optionValue="_id" [showClear]="true" placeholder="Select Category" appendTo="body">
        </p-select>
      </div>

      <!-- Actions -->
      <div class="se-filter-actions">
        <p-button label="Apply" icon="pi pi-check" (onClick)="applyFilters()">
        </p-button>
        <p-button label="Reset" icon="pi pi-refresh" styleClass="p-button-outlined"
          (onClick)="resetFilters()">
        </p-button>
      </div>
    </div>
  </div>

  <!-- GRID AREA -->
  <div class="themed-card list-grid-area">
    <app-shared-grid 
      [data]="data" 
      [gridHeight]="'210px'" 
      [headerFilter]="false" 
      [rowSelectionMode]="rowSelectionMode"
      [GridName]="'Product Details'" 
      [column]="column" 
      (eventFromGrid)="eventFromGrid($event)"
      (gridReady)="onGridReady($event)" 
      (scrolledToBottom)="onScrolledToBottom($event)">
    </app-shared-grid>
  </div>
</div>