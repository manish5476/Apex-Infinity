:host {
  display: block;
  background-color: var(--bg-secondary);
  min-height: 100vh;
  padding-bottom: var(--spacing-4xl);
}

.profile-wrapper {
  max-width: 1100px;
  margin: 0 auto;
  padding: var(--spacing-xl);
}

/* =========================================
   1. HERO CARD (Cover + Identity)
   ========================================= */
.hero-card {
  background: var(--bg-primary);
  border-radius: var(--ui-border-radius-xl);
  overflow: hidden;
  box-shadow: var(--shadow-md);
  margin-bottom: var(--spacing-2xl);
  border: var(--ui-border-width) solid var(--border-primary);
  position: relative;
}

.hero-cover {
  height: 200px;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  position: relative;
}

.hero-content {
  padding: 0 var(--spacing-2xl) var(--spacing-2xl) var(--spacing-2xl);
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  flex-wrap: wrap;
  gap: var(--spacing-lg);
}

/* Avatar Styling */
.avatar-wrapper {
  margin-top: -60px; /* Overlap effect */
  position: relative;
  flex-shrink: 0;
}

.avatar-circle {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  background: var(--bg-primary); /* Fallback */
  border: 4px solid var(--bg-primary); /* Creates the 'cutout' look */
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-heading);
  font-size: var(--font-size-5xl);
  color: var(--text-primary);
  box-shadow: var(--shadow-lg);
  font-weight: var(--font-weight-bold);
  background-clip: padding-box;
}

.status-indicator {
  position: absolute;
  bottom: 12px;
  right: 12px;
  width: 20px;
  height: 20px;
  background: var(--color-disabled);
  border: 3px solid var(--bg-primary);
  border-radius: 50%;
  
  &.active {
    background: var(--color-success);
  }
}

/* Identity Text */
.identity-section {
  flex-grow: 1;
  padding-top: var(--spacing-md);
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  flex-wrap: wrap;
  gap: var(--spacing-lg);
}

.name-block {
  .user-name {
    font-family: var(--font-heading);
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    margin: 0;
    line-height: 1.2;
  }
  .user-role {
    font-size: var(--font-size-md);
    color: var(--text-secondary);
    margin: var(--spacing-xs) 0 0 0;
    font-weight: var(--font-weight-medium);
  }
}

/* Actions */
.action-buttons {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.btn {
  padding: var(--spacing-md) var(--spacing-xl);
  border-radius: var(--ui-border-radius-lg);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  transition: var(--transition-base);
  border: none;
  
  &-primary {
    background: var(--text-primary);
    color: var(--bg-primary);
    &:hover { opacity: 0.9; }
  }
  
  &-secondary {
    background: var(--bg-ternary);
    color: var(--text-primary);
    &:hover { background: var(--border-secondary); }
  }
}

.id-badge {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  margin-right: var(--spacing-md);
  
  .label { font-size: 10px; text-transform: uppercase; color: var(--text-tertiary); }
  .value { font-family: var(--font-mono); font-size: var(--font-size-xs); color: var(--text-secondary); }
}


/* =========================================
   2. LAYOUT GRID
   ========================================= */
.content-grid {
  display: grid;
  grid-template-columns: 320px 1fr; /* Sidebar fixed, Main fluid */
  gap: var(--spacing-xl);
  
  @media (max-width: 900px) {
    grid-template-columns: 1fr;
  }
}

.card {
  background: var(--bg-primary);
  border-radius: var(--ui-border-radius-lg);
  border: var(--ui-border-width) solid var(--border-primary);
  padding: var(--spacing-xl);
  margin-bottom: var(--spacing-xl);
  box-shadow: var(--shadow-xs);
}

.section-heading {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin: 0 0 var(--spacing-lg) 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* =========================================
   3. SIDEBAR STYLES
   ========================================= */
.info-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.info-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
  
  .icon {
    font-size: var(--font-size-xl);
    background: var(--bg-ternary);
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--ui-border-radius);
  }
  
  .info-data {
    display: flex;
    flex-direction: column;
    .label { font-size: var(--font-size-xs); color: var(--text-tertiary); }
    .value { font-size: var(--font-size-sm); color: var(--text-primary); font-weight: var(--font-weight-medium); }
  }
}

/* Location Preview */
.location-preview {
  display: flex;
  gap: var(--spacing-md);
  align-items: center;
  
  .map-placeholder {
    width: 50px;
    height: 50px;
    background: var(--bg-ternary);
    border-radius: var(--ui-border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .location-details h4 {
    margin: 0;
    font-size: var(--font-size-sm);
  }
  .location-details p {
    margin: 0;
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
  }
}

/* Toggles */
.toggle-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-sm) 0;
  border-bottom: 1px solid var(--bg-ternary);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  
  &:last-of-type { border-bottom: none; }
}

.pill-toggle {
  width: 36px;
  height: 20px;
  background: var(--color-disabled);
  border-radius: 20px;
  position: relative;
  transition: var(--transition-colors);
  
  &::after {
    content: '';
    position: absolute;
    top: 2px; left: 2px;
    width: 16px; height: 16px;
    background: white;
    border-radius: 50%;
    transition: var(--transition-transform);
  }
  
  &.on {
    background: var(--accent-primary);
    &::after { transform: translateX(16px); }
  }
}

.notification-pills {
  display: flex;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-md);
  
  .pill {
    font-size: var(--font-size-xs);
    padding: 4px 10px;
    border-radius: 12px;
    background: var(--bg-ternary);
    color: var(--text-tertiary);
    border: 1px solid transparent;
    
    &.active {
      background: rgba(59, 130, 246, 0.1); /* Tint based on accent */
      color: var(--accent-primary);
      border-color: var(--accent-primary);
      font-weight: var(--font-weight-semibold);
    }
  }
}

/* =========================================
   4. MAIN COLUMN STYLES
   ========================================= */
.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-lg);
  
  .section-heading { margin: 0; }
  .counter {
    background: var(--bg-ternary);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: var(--font-size-xs);
    font-weight: bold;
  }
}

.permissions-grid {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
}

.permission-chip {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 20px; /* Full rounded */
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  transition: var(--transition-base);
  
  &:hover {
    border-color: var(--accent-primary);
    color: var(--accent-primary);
    background: var(--bg-primary);
  }
  
  .check {
    font-size: 10px;
    color: var(--color-success);
  }
}

.meta-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-lg);
}

.meta-box {
  background: var(--bg-ternary);
  padding: var(--spacing-lg);
  border-radius: var(--ui-border-radius);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  
  .label { font-size: var(--font-size-xs); text-transform: uppercase; color: var(--text-tertiary); }
  .val { font-family: var(--font-mono); font-size: var(--font-size-md); font-weight: var(--font-weight-semibold); }
  
  .status-text.active { color: var(--color-success); }
}
// ... (Previous styles remain here)

/* =========================================
   1. HERO CARD (Modifications for Upload)
   ========================================= */

// New style for actual image inside the avatar-circle
.avatar-circle {
  // Existing styles...
  position: relative;
  overflow: hidden;

  .profile-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

/* Upload Button Styling */
.upload-btn {
  position: absolute;
  bottom: 0;
  right: 0;
  transform: translate(5%, 5%); // Slightly move it out for better visual balance
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--accent-primary);
  color: white;
  border: 3px solid var(--bg-primary);
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: var(--transition-base);
  z-index: var(--z-fixed); // Ensure it's above the avatar
  
  &:hover:not(:disabled) {
    background: var(--accent-hover, #6d28d9);
    transform: translate(5%, 5%) scale(1.05);
  }
  
  &:disabled {
    cursor: not-allowed;
    opacity: var(--state-loading-opacity);
  }

  .upload-icon {
    font-size: var(--font-size-md);
  }
}

/* Error Alert */
.alert-error {
  max-width: 1100px;
  margin: var(--spacing-xl) auto;
  padding: var(--spacing-md);
  background-color: rgba(239, 68, 68, 0.1); /* Red tint */
  color: var(--color-error, #ef4444);
  border: 1px solid var(--color-error, #ef4444);
  border-radius: var(--ui-border-radius);
  font-size: var(--font-size-sm);
}

/* Pure CSS Spinner (for the uploading state) */
.spinner {
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
// :host {
//   display: block;
//   padding: var(--spacing-2xl);
//   background-color: var(--bg-secondary); /* Assuming mapped in theme engine */
//   min-height: 100vh;
//   font-family: var(--font-body);
//   color: var(--text-primary);
// }

// /* --- Layout Grid --- */
// .profile-container {
//   max-width: 1200px;
//   margin: 0 auto;
// }

// .profile-grid {
//   display: grid;
//   grid-template-columns: 1fr 340px; /* Main content vs Sidebar */
//   gap: var(--spacing-2xl);
//   margin-top: var(--spacing-2xl);

//   @media (max-width: 900px) {
//     grid-template-columns: 1fr;
//   }
// }

// /* --- Header Section --- */
// .profile-header {
//   display: flex;
//   justify-content: space-between;
//   align-items: flex-end;
//   padding-bottom: var(--spacing-xl);
//   border-bottom: var(--ui-border-width) solid var(--component-divider, rgba(0, 0, 0, 0.1));
// }

// .user-identity {
//   display: flex;
//   align-items: center;
//   gap: var(--spacing-xl);
// }

// .avatar-circle {
//   width: 80px;
//   height: 80px;
//   border-radius: 50%;
//   background: linear-gradient(
//     135deg,
//     var(--accent-primary, #3b82f6),
//     var(--accent-secondary, #8b5cf6)
//   );
//   color: white;
//   display: flex;
//   align-items: center;
//   justify-content: center;
//   font-family: var(--font-heading);
//   font-size: var(--font-size-3xl);
//   font-weight: var(--font-weight-bold);
//   box-shadow: var(--shadow-lg);
// }

// .user-name {
//   font-family: var(--font-heading);
//   font-size: var(--font-size-4xl);
//   font-weight: var(--font-weight-bold);
//   margin: 0 0 var(--spacing-xs) 0;
//   line-height: var(--line-height-tight);
// }

// .badges-row {
//   display: flex;
//   gap: var(--spacing-sm);
// }

// .badge {
//   font-size: var(--font-size-xs);
//   font-weight: var(--font-weight-semibold);
//   padding: var(--spacing-xs) var(--spacing-md);
//   border-radius: var(--ui-border-radius-sm);
//   text-transform: uppercase;
//   letter-spacing: 0.5px;
// }

// .role-badge {
//   background-color: var(--bg-ternary, #e5e7eb);
//   color: var(--text-secondary);
// }

// .status-badge {
//   background-color: var(--color-error, #ef4444); /* Default inactive */
//   color: white;

//   &.active {
//     background-color: var(--color-success, #10b981);
//   }
// }

// .id-pill {
//   display: flex;
//   flex-direction: column;
//   align-items: flex-end;

//   .label {
//     font-size: var(--font-size-xs);
//     color: var(--text-tertiary);
//     text-transform: uppercase;
//   }
//   .value {
//     font-family: var(--font-mono);
//     font-size: var(--font-size-sm);
//     color: var(--text-secondary);
//   }
// }

// /* --- Cards & Glass Effect --- */
// .card {
//   background: var(--bg-primary, #ffffff);
//   border-radius: var(--ui-border-radius-lg);
//   padding: var(--spacing-xl);
//   margin-bottom: var(--spacing-xl);
//   border: var(--ui-border-width) solid var(--border-primary, rgba(0, 0, 0, 0.05));
//   box-shadow: var(--shadow-sm);
//   transition: var(--transition-base);

//   &:hover {
//     box-shadow: var(--shadow-md);
//     transform: translateY(-1px);
//   }
// }

// .card-title {
//   font-family: var(--font-heading);
//   font-size: var(--font-size-lg);
//   font-weight: var(--font-weight-semibold);
//   margin-bottom: var(--spacing-lg);
//   color: var(--text-primary);
//   display: flex;
//   justify-content: space-between;
//   align-items: center;
// }

// /* --- Info Rows --- */
// .info-row {
//   display: flex;
//   justify-content: space-between;
//   padding: var(--spacing-md) 0;
//   border-bottom: var(--ui-border-width) solid var(--bg-ternary, #f3f4f6);

//   &:last-child {
//     border-bottom: none;
//   }

//   label {
//     font-size: var(--font-size-sm);
//     color: var(--text-secondary);
//     font-weight: var(--font-weight-medium);
//   }

//   .text-value {
//     font-size: var(--font-size-md);
//     font-weight: var(--font-weight-medium);
//   }
// }

// .verified-icon {
//   color: var(--color-success, #10b981);
//   margin-left: var(--spacing-xs);
//   font-weight: bold;
// }

// /* --- Branch Section --- */
// .branch-highlight {
//   display: flex;
//   gap: var(--spacing-lg);
//   background: var(--bg-secondary);
//   padding: var(--spacing-lg);
//   border-radius: var(--ui-border-radius);
//   border: 1px dashed var(--border-secondary);

//   .branch-icon {
//     font-size: var(--font-size-3xl);
//   }

//   h3 {
//     margin: 0;
//     font-size: var(--font-size-md);
//     font-weight: var(--font-weight-bold);
//   }

//   address {
//     font-style: normal;
//     font-size: var(--font-size-sm);
//     color: var(--text-secondary);
//     line-height: var(--line-height-relaxed);
//     margin-top: var(--spacing-xs);
//   }
// }

// /* --- Permissions --- */
// .permissions-card {
//   display: flex;
//   flex-direction: column;
//   max-height: 500px;
// }

// .count-badge {
//   background: var(--bg-ternary);
//   font-size: var(--font-size-xs);
//   padding: 2px 8px;
//   border-radius: 12px;
//   font-weight: var(--font-weight-bold);
// }

// .permissions-list {
//   display: flex;
//   flex-wrap: wrap;
//   gap: var(--spacing-sm);
//   overflow-y: auto;
//   padding-right: var(--spacing-xs);

//   /* Scrollbar logic using tokens */
//   &::-webkit-scrollbar {
//     width: 6px;
//   }
//   &::-webkit-scrollbar-thumb {
//     background-color: var(--scroll-thumb-c, #cbd5e1);
//     border-radius: 4px;
//   }
// }

// .perm-tag {
//   font-size: var(--font-size-xs);
//   background: var(--bg-secondary);
//   border: 1px solid var(--border-secondary);
//   padding: var(--spacing-xs) var(--spacing-md);
//   border-radius: var(--ui-border-radius-sm);
//   display: flex;
//   align-items: center;
//   gap: var(--spacing-xs);
//   color: var(--text-secondary);
// }

// /* --- Preferences --- */
// .pref-grid {
//   display: grid;
//   grid-template-columns: 1fr 1fr;
//   gap: var(--spacing-lg);
// }

// .pref-item {
//   display: flex;
//   flex-direction: column;
//   gap: var(--spacing-xs);

//   &.full-width {
//     grid-column: 1 / -1;
//   }
// }

// .pref-label {
//   font-size: var(--font-size-xs);
//   color: var(--text-tertiary);
//   text-transform: uppercase;
// }

// .pref-value {
//   font-weight: var(--font-weight-semibold);
//   font-size: var(--font-size-sm);
// }

// .toggle-display {
//   display: flex;
//   gap: var(--spacing-md);

//   span {
//     font-size: var(--font-size-xs);
//     padding: var(--spacing-xs) var(--spacing-md);
//     border-radius: var(--ui-border-radius);
//     background: var(--bg-ternary);
//     color: var(--color-disabled-text, #9ca3af);
//     opacity: var(--state-disabled-opacity);
//     transition: var(--transition-colors);

//     &.enabled {
//       background: rgba(59, 130, 246, 0.1); /* Primary accent tint */
//       color: var(--accent-primary, #3b82f6);
//       opacity: 1;
//       font-weight: var(--font-weight-semibold);
//     }
//   }
// }

// /* --- Metadata --- */
// .metadata-card {
//   .meta-row {
//     display: flex;
//     justify-content: space-between;
//     margin-bottom: var(--spacing-sm);
//     font-size: var(--font-size-xs);
//     color: var(--text-tertiary);

//     code {
//       font-family: var(--font-mono);
//       background: var(--bg-ternary);
//       padding: 2px 4px;
//       border-radius: 3px;
//     }
//   }
// }
