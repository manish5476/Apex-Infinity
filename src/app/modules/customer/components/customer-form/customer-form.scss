/* ==============================================
   CUSTOMER FORM STYLES
   Theme: Enterprise Glass/Canonical Tokens
   ============================================== */

:host {
  display: block;
  width: 100%;
  height: 100%;
}

.form-page-container {
  width: 100%;
  height: 100%;
  /* Prevent double scrollbars: The container is fixed, children scroll */
  overflow: hidden; 
  display: flex;
  flex-direction: column;
  background: var(--bg-primary);
  /* Removed padding for true full-width experience */
  padding: 0; 
}

/* === Card Layout === */
.form-card {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%; /* Fill available vertical space */
  max-width: none; /* Remove width restriction */
  background: var(--bg-secondary);
  /* Remove borders/radius for full-screen feel, or keep if desired. 
     For "Full Width" inside a layout, usually border-radius is removed or minimal. */
  border-radius: 0; 
  border: none;
  box-shadow: none;
  overflow: hidden;
}

/* === HEADER === */
.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-lg) var(--spacing-2xl);
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
  flex-shrink: 0; /* Prevent header from shrinking */
  z-index: 20;

  .form-title {
    font-family: var(--font-heading);
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
  }
}

/* === FORM BODY === */
.form-body {
  display: flex;
  flex-direction: column;
  /* Critical for scrolling: Make this element fill remaining space and scroll internally */
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-2xl);
  gap: var(--spacing-xl);
  background-color: var(--bg-primary);
  position: relative; /* Context for sticky footer */

  @media (max-width: 768px) {
    padding: var(--spacing-lg);
  }
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
  padding: var(--spacing-xl);
  background: var(--bg-secondary);
  border-radius: var(--ui-border-radius-lg);
  border: 1px solid var(--border-primary);
  box-shadow: var(--shadow-sm);

  .section-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    border-left: 4px solid var(--accent-primary);
    padding-left: var(--spacing-md);
  }
}

/* === Grid Systems === */
.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--spacing-lg) var(--spacing-xl);
}

.address-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: var(--spacing-xl);
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

/* === Form Fields === */
.form-field {
  display: flex;
  flex-direction: column;
  gap: 6px;

  label {
    font-size: var(--font-size-xs);
    color: var(--text-label);
    text-transform: uppercase;
    font-weight: 600;
    letter-spacing: 0.03em;
  }

  small {
    font-size: 0.75rem;
    color: var(--color-error);
    margin-top: 2px;
  }

  &.span-2 {
    grid-column: 1 / -1;
  }
}

/* === Address Cards === */
.address-card {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
  padding: var(--spacing-xl);
  background: var(--bg-ternary);
  border-radius: var(--ui-border-radius);
  border: 1px solid var(--border-secondary);

  h5 {
    grid-column: 1 / -1;
    margin: 0 0 0.5rem 0;
    font-size: var(--font-size-md);
    color: var(--text-primary);
    font-weight: 600;
  }

  .address-header {
    grid-column: 1 / -1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    
    h5 { margin: 0; }
  }
}

/* === Avatar Upload === */
.avatar-upload-container {
  display: flex;
  align-items: center;
  gap: var(--spacing-xl);
  padding: var(--spacing-md);
  background: var(--bg-ternary);
  border-radius: var(--ui-border-radius);
  border: 1px dashed var(--border-secondary);

  .avatar-preview {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 2px solid var(--bg-secondary);
    box-shadow: var(--shadow-sm);
  }
}

/* === FOOTER === */
.form-footer {
  background: var(--bg-secondary);
  border-top: 1px solid var(--border-primary);
  padding: var(--spacing-lg) var(--spacing-2xl);
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-md);
  
  /* Sticky behavior inside .form-body */
  position: sticky;
  bottom: 0; 
  z-index: 10;
  /* Margin to offset parent padding so it sits flush at bottom visually */
  margin: 0 calc(var(--spacing-2xl) * -1) calc(var(--spacing-2xl) * -1) calc(var(--spacing-2xl) * -1);
  width: calc(100% + (var(--spacing-2xl) * 2));
}

/* === PrimeNG Overrides (ng-deep) === */
:host ::ng-deep {
  
  // 1. Input Widths
  .p-inputtext, .p-inputnumber, .p-select, .p-textarea {
    width: 100%;
  }

  // 2. Input Backgrounds (Theming)
  .p-inputtext, .p-select, .p-inputnumber-input, .p-textarea {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-secondary) !important;
    
    &:enabled:focus {
      border-color: var(--accent-primary) !important;
      box-shadow: 0 0 0 1px var(--accent-primary) !important;
    }
  }

  // 3. Dropdown Panel
  .p-select-panel {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-primary) !important;
    
    .p-select-item {
      color: var(--text-secondary) !important;
      &.p-focus { background: var(--bg-ternary) !important; }
      &.p-highlight { 
        background: var(--accent-focus) !important; 
        color: var(--accent-primary) !important; 
      }
    }
  }

  // 4. File Upload
  .p-fileupload-basic {
    justify-content: flex-start;
  }
}

/* Animation */
.animate-fadeIn { animation: fadeIn 0.3s ease-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
// /* ==============================================
//    CUSTOMER FORM STYLES
//    Theme: Enterprise Glass/Canonical Tokens
//    ============================================== */

// :host {
//   display: block;
//   width: 100%;
//   height: 100%;
// }

// .form-page-container {
//   width: 100%;
//   height: 100%;
//   overflow-y: auto;
//   display: flex;
//   flex-direction: column;
//   align-items: center;
//   background: var(--bg-primary);
//   padding: var(--spacing-xl);

//   @media (max-width: 768px) {
//     padding: var(--spacing-md);
//   }
// }

// /* === Card Layout === */
// .form-card {
//   display: flex;
//   flex-direction: column;
//   width: 100%;
//   max-width: 1100px; // Limit width for readability on huge screens
//   background: var(--bg-secondary);
//   border-radius: var(--ui-border-radius-lg);
//   box-shadow: var(--shadow-md);
//   overflow: hidden;
//   border: 1px solid var(--border-primary);
// }

// /* === HEADER === */
// .form-header {
//   display: flex;
//   justify-content: space-between;
//   align-items: center;
//   padding: var(--spacing-lg) var(--spacing-2xl);
//   background: var(--bg-secondary);
//   border-bottom: 1px solid var(--border-primary);
//   flex-shrink: 0;

//   .form-title {
//     font-family: var(--font-heading);
//     font-size: var(--font-size-2xl);
//     font-weight: 700;
//     color: var(--text-primary);
//     margin: 0;
//   }
// }

// /* === FORM BODY === */
// .form-body {
//   display: flex;
//   flex-direction: column;
//   gap: var(--spacing-xl);
//   padding: var(--spacing-2xl);
//   background-color: var(--bg-primary); // Contrast inner body
  
//   @media (max-width: 768px) {
//     padding: var(--spacing-lg);
//   }
// }

// .form-section {
//   display: flex;
//   flex-direction: column;
//   gap: var(--spacing-lg);
//   padding: var(--spacing-xl);
//   background: var(--bg-secondary);
//   border-radius: var(--ui-border-radius-lg);
//   border: 1px solid var(--border-primary);
//   box-shadow: var(--shadow-sm);

//   .section-title {
//     font-size: var(--font-size-lg);
//     font-weight: 600;
//     color: var(--text-primary);
//     margin: 0;
//     border-left: 4px solid var(--accent-primary);
//     padding-left: var(--spacing-md);
//   }
// }

// /* === Grid Systems === */
// .form-grid {
//   display: grid;
//   grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
//   gap: var(--spacing-lg) var(--spacing-xl);
// }

// .address-grid {
//   display: grid;
//   grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
//   gap: var(--spacing-xl);
  
//   @media (max-width: 768px) {
//     grid-template-columns: 1fr;
//   }
// }

// /* === Form Fields === */
// .form-field {
//   display: flex;
//   flex-direction: column;
//   gap: 6px;

//   label {
//     font-size: var(--font-size-xs);
//     color: var(--text-label);
//     text-transform: uppercase;
//     font-weight: 600;
//     letter-spacing: 0.03em;
//   }

//   /* Helper text for errors */
//   small {
//     font-size: 0.75rem;
//     color: var(--color-error);
//     margin-top: 2px;
//   }

//   &.span-2 {
//     grid-column: 1 / -1;
//   }
// }

// /* === Address Cards === */
// .address-card {
//   display: grid;
//   grid-template-columns: 1fr 1fr;
//   gap: var(--spacing-lg);
//   padding: var(--spacing-xl);
//   background: var(--bg-ternary); // Slight contrast for address box
//   border-radius: var(--ui-border-radius);
//   border: 1px solid var(--border-secondary);

//   h5 {
//     grid-column: 1 / -1;
//     margin: 0 0 0.5rem 0;
//     font-size: var(--font-size-md);
//     color: var(--text-primary);
//     font-weight: 600;
//   }

//   .address-header {
//     grid-column: 1 / -1;
//     display: flex;
//     justify-content: space-between;
//     align-items: center;
//     margin-bottom: 0.5rem;
    
//     h5 { margin: 0; }
//   }
// }

// /* === Avatar Upload === */
// .avatar-upload-container {
//   display: flex;
//   align-items: center;
//   gap: var(--spacing-xl);
//   padding: var(--spacing-md);
//   background: var(--bg-ternary);
//   border-radius: var(--ui-border-radius);
//   border: 1px dashed var(--border-secondary);

//   .avatar-preview {
//     width: 80px;
//     height: 80px;
//     border-radius: 50%;
//     border: 2px solid var(--bg-secondary);
//     box-shadow: var(--shadow-sm);
//   }
// }

// /* === FOOTER === */
// .form-footer {
//   background: var(--bg-secondary);
//   border-top: 1px solid var(--border-primary);
//   padding: var(--spacing-lg) var(--spacing-2xl);
//   display: flex;
//   justify-content: flex-end;
//   gap: var(--spacing-md);
//   position: sticky;
//   bottom: 0;
//   z-index: 10;
// }

// /* === PrimeNG Overrides (ng-deep) === */
// :host ::ng-deep {
  
//   // 1. Input Widths
//   .p-inputtext, .p-inputnumber, .p-select, .p-textarea {
//     width: 100%;
//   }

//   // 2. Input Backgrounds (Theming)
//   .p-inputtext, .p-select, .p-inputnumber-input, .p-textarea {
//     background-color: var(--bg-primary) !important;
//     color: var(--text-primary) !important;
//     border-color: var(--border-secondary) !important;
    
//     &:enabled:focus {
//       border-color: var(--accent-primary) !important;
//       box-shadow: 0 0 0 1px var(--accent-primary) !important;
//     }
//   }

//   // 3. Dropdown Panel
//   .p-select-panel {
//     background: var(--bg-secondary) !important;
//     border: 1px solid var(--border-primary) !important;
    
//     .p-select-item {
//       color: var(--text-secondary) !important;
//       &.p-focus { background: var(--bg-ternary) !important; }
//       &.p-highlight { 
//         background: var(--accent-focus) !important; 
//         color: var(--accent-primary) !important; 
//       }
//     }
//   }

//   // 4. File Upload
//   .p-fileupload-basic {
//     justify-content: flex-start;
//   }
// }

// /* Animation */
// .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
// @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

// // /* ==============================================
// //    CUSTOMER FORM COMPONENT
// //    - Using canonical theme tokens
// //    - Improved visual hierarchy
// //    ============================================== */

// // :host {
// //   display: block;
// //   width: 100%;
// //   height: 100%;
// // }

// // .form-page-container {
// //   width: 100%;
// //   height: 100%;
// //   overflow-y: auto; // Allow page to scroll
// //   display: flex;
// //   flex-direction: column;
// //   align-items: center; // Center the card
// //   background: var(--bg-primary);
// //   padding: var(--spacing-xl);
// // }

// // /* === Card Layout === */
// // .form-card {
// //   display: flex;
// //   flex-direction: column;
// //   width: 100%;
// //   // max-width: 1200px; // Removed to allow full width
// //   background: var(--bg-secondary);
// //   border-radius: var(--ui-border-radius-lg);
// //   box-shadow: var(--shadow-md);
// //   overflow: hidden;
// //   border: var(--ui-border-width) solid var(--border-primary);
// // }

// // /* === HEADER === */
// // .form-header {
// //   display: flex;
// //   justify-content: space-between;
// //   align-items: center;
// //   padding: var(--spacing-lg) var(--spacing-xl);
// //   background: var(--bg-secondary);
// //   border-bottom: var(--ui-border-width) solid var(--border-primary);
// //   flex-shrink: 0;

// //   .form-title {
// //     font-size: var(--font-size-2xl);
// //     font-weight: 600;
// //     color: var(--text-primary);
// //     margin: 0;
// //   }
// // }

// // /* === FORM BODY === */
// // .form-body {
// //   display: flex;
// //   flex: 1;
// //   flex-direction: column;
// //   gap: var(--spacing-xl);
// //   padding: var(--spacing-xl);
// //   overflow-y: auto;
// //   background-color: var(--bg-primary); // Use primary bg for contrast
// //   flex: 1; // Add this line to make the body fill available space
// // }

// // .form-section {
// //   display: flex;
// //   flex-direction: column;
// //   gap: var(--spacing-lg);
// //   padding: var(--spacing-xl);
// //   background: var(--bg-secondary); // Use secondary bg for sections
// //   border-radius: var(--ui-border-radius-lg); // Make sections rounded
// //   border: var(--ui-border-width) solid var(--border-primary);
// //   box-shadow: var(--shadow-sm); // Add shadow to lift section

// //   .section-title {
// //     font-size: var(--font-size-lg);
// //     font-weight: 600;
// //     color: var(--text-primary);
// //     margin: 0;
// //     border-left: 4px solid var(--accent-primary);
// //     padding-left: var(--spacing-md);
// //   }
// // }

// // /* === Form Grid System === */
// // .form-grid {
// //   display: grid;
// //   grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
// //   gap: var(--spacing-lg) var(--spacing-xl);
// // }

// // .form-field {
// //   display: flex;
// //   flex-direction: column;
// //   gap: var(--spacing-sm);

// //   label {
// //     font-size: var(--font-size-xs);
// //     color: var(--text-label);
// //     text-transform: uppercase;
// //     font-weight: 500;
// //   }

// //   /* This rule is now in ::ng-deep to ensure
// //     all components get 100% width reliably.
// //   */
// //   &.span-2 {
// //     grid-column: 1 / -1;
// //   }
// // }

// // /* === Address Grid === */
// // .address-grid {
// //   display: grid;
// //   grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
// //   gap: var(--spacing-xl);
// // }

// // .address-card {
// //   display: flex;
// //   flex-direction: column;
// //   gap: var(--spacing-lg);
// //   padding: var(--spacing-lg);
// //   background: var(--bg-primary); // Use primary for contrast inside section
// //   border-radius: var(--ui-border-radius);
// //   border: var(--ui-border-width) solid var(--border-primary);

// //   h5 {
// //     font-size: var(--font-size-md);
// //     font-weight: 600;
// //     color: var(--text-primary);
// //     margin: 0;
// //   }

// //   .address-header {
// //     display: flex;
// //     justify-content: space-between;
// //     align-items: center;
// //   }

// //   .copy-address {
// //     display: flex;
// //     align-items: center;
// //     gap: var(--spacing-sm);
// //   }
// // }


// // /* === FOOTER === */
// // .form-footer {
// //   background: var(--bg-secondary);
// //   border-top: var(--ui-border-width) solid var(--border-primary);
// //   padding: var(--spacing-lg) var(--spacing-xl);
// //   display: flex;
// //   justify-content: flex-end;
// //   gap: var(--spacing-md);
// //   flex-shrink: 0;
// // }

// // /* === Validation Styling === */
// // :host ::ng-deep {

// //   // Ensure all form components take full width inside a form-field
// //   .form-field {
// //     :is(p-select, .p-inputnumber, .p-inputtextarea, .p-fileupload) {
// //       width: 100%;
// //     }
// //   }

// //   // Set input backgrounds to contrast with the section (bg-secondary)
// //   // Use bg-ternary for inputs
// //   :is(.p-inputtext, .p-inputnumber-input, .p-textarea) {
// //     background: var(--bg-ternary);
// //     color: var(--text-primary);
// //   }
  
// //   // p-select has a wrapper, so we style it and its label
// //   .p-select {
// //     background: var(--bg-ternary);
// //     color: var(--text-primary);
// //     .p-select-label {
// //       background: transparent;
// //       color: var(--text-primary);
// //     }
// //   }

// //   // Style invalid touched form fields
// //   .ng-invalid.ng-touched {
// //     :is(.p-inputtext, p-select, .p-inputnumber, .p-inputtextarea) {
// //       border-color: var(--color-error);
// //     }
    
// //     // Target the button inside p-inputnumber
// //     .p-inputnumber-button {
// //       border-color: var(--color-error);
// //     }
// //   }

// //   // Ensure dropdown panels match theme
// //   .p-select-panel {
// //     background: var(--bg-secondary);
// //     border: var(--ui-border-width) solid var(--border-primary);
    
// //     .p-select-item {
// //       color: var(--text-secondary);
// //       &:hover {
// //         background: var(--bg-ternary);
// //         color: var(--text-primary);
// //       }
// //     }
// //     .p-select-item.p-highlight {
// //       background: var(--accent-focus);
// //       color: var(--accent-primary);
// //     }
// //   }
// // }
// // /* === Address Grid (two cards side-by-side) === */
// // .address-grid {
// //   display: grid;
// //   grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
// //   gap: var(--spacing-xl);
// // }

// // /* === Address Card (fields inside become 2-per-row) === */
// // .address-card {
// //   display: grid;
// //   grid-template-columns: repeat(2, 1fr); /* 2 form fields per row */
// //   gap: var(--spacing-lg);
// //   padding: var(--spacing-xl);
// //   background: var(--bg-primary); /* consistent with inner section contrast */
// //   border-radius: var(--ui-border-radius-lg);
// //   border: var(--ui-border-width) solid var(--border-primary);
// // }

// // /* Title + header spans full row */
// // .address-card h5,
// // .address-card .address-header {
// //   grid-column: 1 / -1;
// // }

// // .address-card h5 {
// //   font-size: var(--font-size-md);
// //   font-weight: 600;
// //   color: var(--text-primary);
// //   margin: 0;
// // }

// // /* Header flex for Shipping Address */
// // .address-card .address-header {
// //   display: flex;
// //   justify-content: space-between;
// //   align-items: center;
// // }

// // .address-card .copy-address {
// //   display: flex;
// //   align-items: center;
// //   gap: var(--spacing-sm);
// // }

// // /* Standard form-field remains unchanged */
// // .address-card .form-field {
// //   display: flex;
// //   flex-direction: column;
// //   gap: var(--spacing-sm);
// // }

// // .address-card .form-field label {
// //   font-size: var(--font-size-xs);
// //   color: var(--text-label);
// //   font-weight: 500;
// //   text-transform: uppercase;
// // }

// // /* Mobile: stack inputs (1-per-row) */
// // @media (max-width: 768px) {
// //   .address-card {
// //     grid-template-columns: 1fr;
// //   }
// // }
