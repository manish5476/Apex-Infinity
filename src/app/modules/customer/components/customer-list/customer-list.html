<p-toast></p-toast>

<div class="list-page-container">

  <div class="list-header">
    <h2 class="list-title">
      <i class="pi pi-users text-[var(--accent-primary)]"></i>
      Customer Management
    </h2>
    <p-button label="New Customer" icon="pi pi-plus" routerLink="create">
    </p-button>
  </div>

  <div class="themed-card list-content-area">

    <div class="se-filter-bar">
      <div class="se-filter-field">
        <label for="customer">Customer</label>
        <p-select  (onChange)="applyFilters()" id="customer" [options]="masterList.customers()" [(ngModel)]="customerFilter._id"
          [filter]="true" filterBy="name" optionLabel="name" optionValue="_id" [showClear]="true"
          placeholder="Select Customer" appendTo="body">
        </p-select>
      </div>

      <div class="se-filter-field">
        <label for="email">Email</label>
        <p-autoComplete   (onChange)="applyFilters()" id="email" [(ngModel)]="customerFilter.email" [suggestions]="emailSuggestions"
          (completeMethod)="filterEmails($event)" (keyup.enter)="applyFilters()" [forceSelection]="false"
          placeholder="Enter email">
        </p-autoComplete>
      </div>

      <div class="se-filter-field">
        <label for="phone">Phone</label>
        <input   (keydown.enter)="applyFilters()" (blur)="applyFilters()" id="phone" type="text" pInputText [(ngModel)]="customerFilter.phone" placeholder="Phone"
          (keyup.enter)="applyFilters()" />
      </div>

      <div class="se-filter-actions">
        <!-- <p-button label="Apply" icon="pi pi-check" (onCick)="applyFilters()">
        </p-button> -->
        <p-button label="Reset" icon="pi pi-refresh" styleClass="p-button-outlined"
          (onClick)="resetFilters()">
        </p-button>
      </div>
    </div>

    <div class="list-grid-wrapper">
      <app-shared-grid [data]="data" [gridHeight]="'210px'" [headerFilter]="false"
        [rowSelectionMode]="rowSelectionMode" [GridName]="'Customer Details'" [column]="column"
        (eventFromGrid)="eventFromGrid($event)" (gridReady)="onGridReady($event)"
        (scrolledToBottom)="onScrolledToBottom($event)">
      </app-shared-grid>
    </div>

  </div>
</div>