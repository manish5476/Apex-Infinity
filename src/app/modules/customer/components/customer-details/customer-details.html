<div class="form-page-container">
  @if (customer(); as c) {
    <div class="form-card animate-fadeIn">
      <header class="form-header">
        <div class="header-content">
          <h2 class="form-title">{{ c.name }}</h2>
          <div class="header-badges">
            <span class="id-badge">ID: {{ c.code || 'GEN-' + (c._id | slice:-4) }}</span>
            <p-tag 
              [value]="c.isActive ? 'Active' : 'Inactive'" 
              [severity]="c.isActive ? 'success' : 'danger'">
            </p-tag>
          </div>
        </div>

        <div class="header-actions">
          <p-button icon="pi pi-arrow-left" label="Back" styleClass="p-button-text" routerLink="/customer"></p-button>
          <!-- Using relative path for edit -->
          <p-button icon="pi pi-pencil" label="Edit" styleClass="p-button-outlined" [routerLink]="['../../customer/create']" [queryParams]="{id: c._id}"></p-button>
        </div>
      </header>

      <p-divider styleClass="m-0"></p-divider>

      <div class="form-body">

        <section class="form-section summary-section">
           <div class="summary-grid">
              <div class="identity-box">
                 <p-avatar 
                    [image]="c.avatar" 
                    [label]="common.getInitials(c.name)" 
                    size="xlarge" 
                    shape="circle" 
                    styleClass="shadow-1">
                 </p-avatar>
                 <div class="identity-text">
                    <h3>{{ c.contactPerson || c.name }}</h3>
                    <span>{{ c.type | titlecase }} Customer</span>
                 </div>
              </div>

              <div class="financial-snapshot">
                  <div class="snapshot-item">
                      <label>Outstanding</label>
                      <span class="value" [class.text-red-500]="c.outstandingBalance > 0">
                          {{ common.formatCurrency(c.outstandingBalance) }}
                      </span>
                  </div>
                  <div class="snapshot-divider"></div>
                  <div class="snapshot-item">
                      <label>Credit Limit</label>
                      <span class="value">{{ common.formatCurrency(c.creditLimit) }}</span>
                  </div>
              </div>
           </div>
        </section>

        <section class="form-section">
          <h4 class="section-title">Basic Information</h4>
          <div class="form-grid">
            
            <div class="read-only-field">
              <label>Email Address</label>
              <div class="field-value">
                  <i class="pi pi-envelope text-xs mr-2 text-gray-400"></i>
                  {{ c.email || '-' }}
              </div>
            </div>

            <div class="read-only-field">
              <label>Primary Phone</label>
              <div class="field-value">
                  <i class="pi pi-phone text-xs mr-2 text-gray-400"></i>
                  {{ c.phone || '-' }}
              </div>
            </div>

            <div class="read-only-field">
              <label>Alternate Phone</label>
              <div class="field-value">{{ c.altPhone || '-' }}</div>
            </div>

            <div class="read-only-field">
              <label>GST Number</label>
              <div class="field-value font-mono">{{ c.gstNumber || '-' }}</div>
            </div>

            <div class="read-only-field">
              <label>PAN Number</label>
              <div class="field-value font-mono">{{ c.panNumber || '-' }}</div>
            </div>

            <div class="read-only-field">
              <label>Payment Terms</label>
              <div class="field-value">{{ c.paymentTerms || 'Standard' }}</div>
            </div>

          </div>
        </section>

        <section class="form-section">
          <h4 class="section-title">Addresses</h4>
          <div class="address-grid">
              
              <div class="address-card read-only">
                  <h5>Billing Address</h5>
                  <div class="addr-content">
                      <p>{{ c.billingAddress?.street || 'No Street' }}</p>
                      <p>{{ c.billingAddress?.city || 'No City' }}, {{ c.billingAddress?.state }}</p>
                      <p>{{ c.billingAddress?.zipCode }}</p>
                  </div>
              </div>

              <div class="address-card read-only">
                  <div class="address-header">
                      <h5>Shipping Address</h5>
                      @if (isSameAddress()) {
                        <span class="pill text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">Same as Billing</span>
                      }
                  </div>
                  <div class="addr-content">
                      <p>{{ c.shippingAddress?.street || 'No Street' }}</p>
                      <p>{{ c.shippingAddress?.city || 'No City' }}, {{ c.shippingAddress?.state }}</p>
                      <p>{{ c.shippingAddress?.zipCode }}</p>
                  </div>
              </div>

          </div>
        </section>

        <section class="form-section">
           <h4 class="section-title">Notes & Tags</h4>
           <div class="form-grid">
               <div class="read-only-field span-2">
                   <label>Internal Notes</label>
                   <div class="field-value description-box">
                       {{ c.notes || 'No notes available.' }}
                   </div>
               </div>
               <div class="read-only-field span-2">
                   <label>Tags</label>
                   <div class="tags-container flex gap-2 mt-1">
                      @for (tag of getFilteredTags(); track $index) {
                        <p-tag [value]="tag" severity="info"></p-tag>
                      } @empty {
                        <span class="text-sm text-gray-400">No tags</span>
                      }
                   </div>
               </div>
           </div>
        </section>

      </div>
    </div>
  } @else {
    <div class="form-page-container flex justify-center items-center h-64">
        <p-skeleton width="100%" height="400px"></p-skeleton>
    </div>
  }
</div>


<!-- 
<div class="form-page-container">
  @if (customer(); as c) {
    <div class="form-card animate-fadeIn">
      <header class="form-header">
        <div class="header-content">
          <h2 class="form-title">{{ c.name }}</h2>
          <div class="header-badges">
            <span class="id-badge">ID: {{ c.code || 'GEN-' + (c._id | slice:-4) }}</span>
            <p-tag 
              [value]="c.isActive ? 'Active' : 'Inactive'" 
              [severity]="c.isActive ? 'success' : 'danger'">
            </p-tag>
          </div>
        </div>

        <div class="header-actions">
          <p-button icon="pi pi-arrow-left" label="Back" styleClass="p-button-text" routerLink="/customer"></p-button>
          <p-button icon="pi pi-pencil" label="Edit" styleClass="p-button-outlined" [routerLink]="['../edit', c._id]"></p-button>
        </div>
      </header>

      <p-divider styleClass="m-0"></p-divider>

      <div class="form-body">

        <section class="form-section summary-section">
           <div class="summary-grid">
              <div class="identity-box">
                 <p-avatar 
                    [image]="c.avatar" 
                    [label]="getInitials(c.name)" 
                    size="xlarge" 
                    shape="circle" 
                    styleClass="shadow-1">
                 </p-avatar>
                 <div class="identity-text">
                    <h3>{{ c.contactPerson }}</h3>
                    <span>{{ c.type | titlecase }} Customer</span>
                 </div>
              </div>

              <div class="financial-snapshot">
                  <div class="snapshot-item">
                      <label>Outstanding</label>
                      <span class="value" [class.text-red-500]="c.outstandingBalance > 0">
                          {{ formatCurrency(c.outstandingBalance) }}
                      </span>
                  </div>
                  <div class="snapshot-divider"></div>
                  <div class="snapshot-item">
                      <label>Credit Limit</label>
                      <span class="value">{{ formatCurrency(c.creditLimit) }}</span>
                  </div>
              </div>
           </div>
        </section>

        <section class="form-section">
          <h4 class="section-title">Basic Information</h4>
          <div class="form-grid">
            
            <div class="read-only-field">
              <label>Email Address</label>
              <div class="field-value">
                  <i class="pi pi-envelope text-xs mr-2 text-gray-400"></i>
                  {{ c.email || '-' }}
              </div>
            </div>

            <div class="read-only-field">
              <label>Primary Phone</label>
              <div class="field-value">
                  <i class="pi pi-phone text-xs mr-2 text-gray-400"></i>
                  {{ c.phone || '-' }}
              </div>
            </div>

            <div class="read-only-field">
              <label>Alternate Phone</label>
              <div class="field-value">{{ c.altPhone || '-' }}</div>
            </div>

            <div class="read-only-field">
              <label>GST Number</label>
              <div class="field-value font-mono">{{ c.gstNumber || '-' }}</div>
            </div>

            <div class="read-only-field">
              <label>PAN Number</label>
              <div class="field-value font-mono">{{ c.panNumber || '-' }}</div>
            </div>

            <div class="read-only-field">
              <label>Payment Terms</label>
              <div class="field-value">{{ c.paymentTerms || 'Standard' }}</div>
            </div>

          </div>
        </section>

        <section class="form-section">
          <h4 class="section-title">Addresses</h4>
          <div class="address-grid">
              
              <div class="address-card read-only">
                  <h5>Billing Address</h5>
                  <div class="addr-content">
                      <p>{{ c.billingAddress?.street || 'No Street' }}</p>
                      <p>{{ c.billingAddress?.city || 'No City' }}, {{ c.billingAddress?.state }}</p>
                      <p>{{ c.billingAddress?.zipCode }}</p>
                  </div>
              </div>

              <div class="address-card read-only">
                  <div class="address-header">
                      <h5>Shipping Address</h5>
                      @if (isSameAddress()) {
                        <span class="pill text-xs">Same as Billing</span>
                      }
                  </div>
                  <div class="addr-content">
                      <p>{{ c.shippingAddress?.street || 'No Street' }}</p>
                      <p>{{ c.shippingAddress?.city || 'No City' }}, {{ c.shippingAddress?.state }}</p>
                      <p>{{ c.shippingAddress?.zipCode }}</p>
                  </div>
              </div>

          </div>
        </section>

        <section class="form-section">
           <h4 class="section-title">Notes & Tags</h4>
           <div class="form-grid">
               <div class="read-only-field span-2">
                   <label>Internal Notes</label>
                   <div class="field-value description-box">
                       {{ c.notes || 'No notes available.' }}
                   </div>
               </div>
               <div class="read-only-field span-2">
                   <label>Tags</label>
                   <div class="tags-container">
                      @for (tag of getFilteredTags(); track $index) {
                        <p-tag [value]="tag" styleClass="mr-2"></p-tag>
                      } @empty {
                        <span class="text-sm text-gray-400">No tags</span>
                      }
                   </div>
               </div>
           </div>
        </section>

      </div>
    </div>
  } @else {
    <div class="form-page-container flex-center">
        <i class="pi pi-spin pi-spinner text-4xl text-[var(--text-secondary)]"></i>
    </div>
  }
</div> -->