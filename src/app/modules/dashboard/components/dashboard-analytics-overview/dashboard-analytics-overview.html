<div class="overview-grid">
  
  <!-- 1. KPI Section -->
  <section class="kpi-row" *ngIf="kpi">
    <kpi-card 
      label="Total Revenue" 
      icon="pi-wallet" 
      [value]="kpi.revenue" 
      [growth]="kpi.revenueGrowth"
      trend="up">
    </kpi-card>

    <kpi-card 
      label="Total Expense" 
      icon="pi-arrow-circle-down" 
      [value]="kpi.expense" 
      [growth]="kpi.expenseGrowth"
      trend="down">
    </kpi-card>

    <kpi-card 
      label="Net Profit" 
      icon="pi-chart-line" 
      [value]="kpi.profit" 
      [growth]="kpi.profitGrowth"
      trend="up">
    </kpi-card>

    <kpi-card 
      label="Outstanding" 
      icon="pi-exclamation-circle" 
      [value]="kpi.receivables" 
      trend="neutral"
      [helperText]="'Payables: ' + (kpi.payables | currency:'INR':'symbol':'1.0-0')">
    </kpi-card>
  </section>

  <!-- 2. Charts Section -->
  <section class="charts-row">
    <!-- Main Revenue Timeline -->
    <div class="chart-panel glass-panel wide">
      <div class="card-header">
        <h3>Revenue Trajectory</h3>
        <span class="badge">Live</span>
      </div>
      <revenue-chart [data]="timeline"></revenue-chart>
    </div>

    <!-- Payment Modes (If available) -->
    <div class="chart-panel glass-panel" *ngIf="paymentModes?.values?.length">
      <div class="card-header">
        <h3>Payment Modes</h3>
      </div>
      <payment-donut [data]="paymentModes"></payment-donut>
    </div>
  </section>

  <!-- 3. Lists & Inventory Snapshot -->
  <section class="lists-row">
    
    <!-- Top Products -->
    <div class="list-panel glass-panel">
      <div class="card-header">
        <h3>Top Performing Products</h3>
      </div>
      <top-products [products]="products"></top-products>
    </div>

    <!-- Top Customers -->
    <div class="list-panel glass-panel">
      <div class="card-header">
        <h3>Loyal Customers</h3>
      </div>
      <top-customers [customers]="customers"></top-customers>
    </div>

    <!-- Inventory Status & Alerts -->
    <div class="insight-stack">
      <div class="mini-panel glass-panel">
        <inventory-status [inventory]="inventory"></inventory-status>
      </div>
      
      <!-- Optional: Placeholder for more insights if needed -->
      <div class="mini-panel glass-panel empty-state">
        <i class="pi pi-chart-bar"></i>
        <span>More insights coming soon</span>
      </div>
    </div>

  </section>

</div>