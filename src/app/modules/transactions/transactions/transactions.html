<p-toast></p-toast>

<div class="txn-container">

  <!-- HEADER -->
  <div class="txn-header">
    <div class="title-section">
      <i class="pi pi-receipt icon"></i>
      <h2>Transactions</h2>
    </div>

    <p-button label="Export CSV" icon="pi pi-download" styleClass="se-btn-outline" (onClick)="downloadCsv()">
    </p-button>
  </div>

  <!-- CARD -->
  <div class="txn-card">

    <!-- FILTER BAR -->
    <div class="filter-bar">

      <div class="filter-field">
        <label>Date Range</label>
        <p-datepicker [(ngModel)]="rangeDates" selectionMode="range" [readonlyInput]="true" placeholder="Start  -  End"
          [showIcon]="true" appendTo="body" class="se-input" (onClose)="applyFilters()">
        </p-datepicker>
      </div>

      <div class="filter-field">
        <label>Type</label>
        <p-select [(ngModel)]="filterParams.type" [options]="transactionTypes" [showClear]="true"
          placeholder="Select type" appendTo="body" class="se-input" (onChange)="applyFilters()">
        </p-select>
      </div>

      <div class="filter-field">
        <label>Effect</label>
        <p-select [(ngModel)]="filterParams.effect" [options]="transactionEffects" [showClear]="true"
          placeholder="Credit / Debit" appendTo="body" class="se-input" (onChange)="applyFilters()">
        </p-select>
      </div>

      <div class="filter-field">
        <label>Search</label>
        <input type="text" placeholder="Desc or Ref No..." [(ngModel)]="filterParams.search"
          (keydown.enter)="applyFilters()" class="se-input" pInputText />
      </div>

      <div class="filter-actions">
        <p-button icon="pi pi-refresh" label="Reset" styleClass="se-btn-outline" (onClick)="resetFilters()">
        </p-button>
      </div>
    </div>

    <!-- GRID -->
    <div class="grid-wrapper">
      <app-shared-grid [data]="data" [gridHeight]="'210px'" [headerFilter]="true" [rowSelectionMode]="rowSelectionMode"
        [GridName]="'Transactions'" [column]="column" (gridReady)="onGridReady($event)"
        (scrolledToBottom)="onScrolledToBottom($event)">
      </app-shared-grid>
    </div>

  </div>
</div>