:host {
  display: block;
  height: 100vh;
  width: 100%;
  overflow: hidden;
  font-family: var(--font-body);
  font-size: var(--font-size-base);
}

.chat-layout {
  display: flex;
  height: 100%;
  background: var(--bg-primary);
  color: var(--text-primary);
}

.sidebar {
  width: 260px;
  background: var(--bg-secondary);
  border-right: var(--ui-border-width) solid var(--border-primary);
  display: flex;
  flex-direction: column;
}

/* Header */
.sidebar-header {
  padding: var(--spacing-lg) var(--spacing-xl);
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: var(--ui-border-width) solid var(--border-secondary);
}

.org-name {
  margin: 0;
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
}

.status-badge {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  text-transform: uppercase;
  color: var(--color-warning);

  &.connected {
    color: var(--color-success);
  }
}

.btn-icon-soft {
  width: 28px;
  height: 28px;
  border-radius: var(--ui-border-radius);
  background: var(--bg-ternary);
  border: var(--ui-border-width) solid var(--border-secondary);
  color: var(--text-secondary);
  display: grid;
  place-items: center;
  cursor: pointer;

  &:hover {
    background: var(--accent-primary);
    color: #fff;
    border-color: transparent;
  }
}
.sidebar-content {
  flex: 1;
  padding: var(--spacing-md);
  overflow-y: auto;
}

.section-header {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  color: var(--text-label);
  text-transform: uppercase;
  padding: var(--spacing-sm) var(--spacing-sm);
}

.channel-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  border-radius: var(--ui-border-radius);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  cursor: pointer;

  &:hover {
    background: var(--component-bg-hover);
    color: var(--text-primary);
  }

  &.active {
    background: var(--accent-primary);
    color: #fff;
  }
}

.channel-info {
  display: flex;
  align-items: center;
  gap: 6px;
}

.hash {
  opacity: 0.4;
  font-family: var(--font-mono);
}
.chat-header {
  height: 52px;
  padding: 0 var(--spacing-xl);
  display: flex;
  align-items: center;
  border-bottom: var(--ui-border-width) solid var(--border-primary);
  background: var(--bg-secondary);
}

.channel-title {
  margin: 0;
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
}

.member-count {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
}
.messages-container {
  flex: 1;
  padding: var(--spacing-xl);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}
.message-group {
  display: flex;
  align-items: flex-end;
  gap: var(--spacing-sm);
  max-width: 70%;
}

.message-group.mine {
  margin-left: auto;
  flex-direction: row-reverse;
}
.avatar {
  width: 28px;
  height: 28px;
  border-radius: var(--ui-border-radius);
  background: var(--bg-ternary);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  display: grid;
  place-items: center;
}
.message-meta {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
}
.bubble {
  padding: 6px 10px;
  background: var(--bg-primary);
  border-radius: var(--ui-border-radius-lg);
  border: var(--ui-border-width) solid var(--border-secondary);
  line-height: var(--line-height-relaxed);
}
.mine .bubble {
  background: var(--accent-primary);
  color: #fff;
  border: none;
}
.composer-area {
  padding: var(--spacing-md) var(--spacing-xl);
  border-top: var(--ui-border-width) solid var(--border-primary);
  background: var(--bg-secondary);
}

.composer-glass {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: 6px;
  border-radius: var(--ui-border-radius-lg);
  background: var(--bg-primary);
  border: var(--ui-border-width) solid var(--border-secondary);
}

.input-message {
  flex: 1;
  border: none;
  background: transparent;
  font-size: var(--font-size-base);
  outline: none;
}

.btn-send {
  width: 32px;
  height: 32px;
  border-radius: var(--ui-border-radius);
  background: var(--accent-primary);
  color: #fff;
  border: none;
}
@media (max-width: 768px) {
  .sidebar {
    position: absolute;
    z-index: var(--z-fixed);
    height: 100%;
  }

  .messages-container {
    padding: var(--spacing-md);
  }

  .message-group {
    max-width: 88%;
  }
}


// :host {
//   display: block;
//   height: 100vh;
//   width: 100%;
//   overflow: hidden;
//   font-family: var(--font-body);
//   font-size: var(--font-size-base);
// }

// .chat-layout {
//   display: flex;
//   height: 100%;
//   width: 100%;
//   background: var(--bg-primary);
//   color: var(--text-primary);
// }

// /* --- SIDEBAR --- */
// .sidebar {
//   width: 260px; /* Refined compact width */
//   background: var(--glass-bg-c);
//   backdrop-filter: blur(var(--glass-blur-c));
//   border-right: var(--ui-border-width) solid var(--glass-border-c);
//   display: flex;
//   flex-direction: column;
//   z-index: var(--z-sticky);

//   .sidebar-header {
//     padding: var(--spacing-lg) var(--spacing-xl);
//     display: flex;
//     justify-content: space-between;
//     align-items: center;
//     border-bottom: var(--ui-border-width) solid var(--border-secondary);

//     .org-name {
//       margin: 0;
//       font-family: var(--font-heading);
//       font-weight: var(--font-weight-bold);
//       font-size: var(--font-size-lg);
//       letter-spacing: -0.3px;
//     }

//     .status-badge {
//       font-size: var(--font-size-xs);
//       color: var(--color-warning);
//       text-transform: uppercase;
//       font-weight: var(--font-weight-bold);
//       &.connected { color: var(--color-success); }
//     }

//     .btn-icon-soft {
//       background: var(--bg-ternary);
//       border: var(--ui-border-width) solid var(--border-secondary);
//       color: var(--text-secondary);
//       width: 28px; height: 28px;
//       border-radius: var(--ui-border-radius);
//       cursor: pointer;
//       display: grid; place-items: center;
//       transition: var(--transition-base);

//       &:hover {
//         background: var(--accent-primary);
//         color: white;
//         border-color: transparent;
//         box-shadow: var(--shadow-md);
//       }
//     }
//   }

//   .sidebar-content {
//     flex: 1;
//     overflow-y: auto;
//     padding: var(--spacing-lg);

//     .section-header {
//       font-size: var(--font-size-xs);
//       color: var(--text-label);
//       font-weight: var(--font-weight-bold);
//       letter-spacing: 0.05em;
//       margin-bottom: var(--spacing-sm);
//       padding-left: var(--spacing-sm);
//       text-transform: uppercase;
//     }

//     .channel-item {
//       padding: var(--spacing-sm) var(--spacing-md);
//       margin-bottom: 2px;
//       border-radius: var(--ui-border-radius);
//       display: flex;
//       justify-content: space-between;
//       align-items: center;
//       cursor: pointer;
//       color: var(--text-secondary);
//       transition: var(--transition-fast);
//       border: var(--ui-border-width) solid transparent;

//       .hash { opacity: 0.4; margin-right: 4px; font-family: var(--font-mono); }
//       .name { font-weight: var(--font-weight-medium); font-size: var(--font-size-sm); }
//       .lock-icon { font-size: var(--font-size-xs); opacity: 0.5; }

//       &:hover {
//         background: var(--component-bg-hover);
//         color: var(--text-primary);
//       }

//       &.active {
//         background: var(--accent-gradient);
//         color: white;
//         box-shadow: var(--shadow-sm);
        
//         .hash { opacity: 0.7; color: rgba(255,255,255,0.9); }
//         .lock-icon { color: white; }
//       }
//     }
//   }
// }

// /* --- MAIN CHAT --- */
// .chat-main {
//   flex: 1;
//   display: flex;
//   flex-direction: column;
//   position: relative;
//   background: var(--bg-secondary);
// }

// .chat-header {
//   height: 56px; /* Compact height */
//   padding: 0 var(--spacing-xl);
//   display: flex;
//   align-items: center;
//   border-bottom: var(--ui-border-width) solid var(--border-primary);
//   background: var(--glass-bg-c);
//   backdrop-filter: blur(var(--glass-blur-c));
//   z-index: var(--z-sticky);
  
//   .channel-title {
//     margin: 0;
//     font-size: var(--font-size-md);
//     font-family: var(--font-heading);
//     font-weight: var(--font-weight-semibold);
//     .hash { color: var(--text-tertiary); font-weight: var(--font-weight-light); }
//   }
  
//   .member-count {
//     color: var(--text-tertiary);
//     font-size: var(--font-size-xs);
//     margin-top: 1px;
//   }
// }

// /* Feed */
// .messages-container {
//   flex: 1;
//   overflow-y: auto;
//   padding: var(--spacing-xl);
//   display: flex;
//   flex-direction: column;
//   gap: var(--spacing-md);
  
//   &::-webkit-scrollbar { width: 4px; }
//   &::-webkit-scrollbar-track { background: var(--scroll-track-c); }
//   &::-webkit-scrollbar-thumb { 
//     background: var(--scroll-thumb-c); 
//     border-radius: var(--ui-border-radius-xl); 
//   }
// }

// /* Message Rows */
// .message-group {
//   display: flex;
//   align-items: flex-end;
//   gap: var(--spacing-md);
//   max-width: 85%;
//   animation: fadeIn var(--transition-base);

//   .avatar {
//     width: 32px; height: 32px;
//     border-radius: var(--ui-border-radius);
//     background: var(--bg-ternary);
//     color: var(--accent-primary);
//     display: flex; 
//     align-items: center; justify-content: center;
//     font-weight: var(--font-weight-bold); 
//     font-size: var(--font-size-xs);
//     border: var(--ui-border-width) solid var(--border-secondary);
//     box-shadow: var(--shadow-xs);
//   }

//   .message-content {
//     display: flex;
//     flex-direction: column;
//     gap: 2px;
    
//     .message-meta {
//       font-size: var(--font-size-xs);
//       color: var(--text-tertiary);
//       margin-bottom: 2px;
//       .sender-name { font-weight: var(--font-weight-semibold); color: var(--text-secondary); margin-right: var(--spacing-sm); }
//     }
//   }

//   .bubble {
//     padding: var(--spacing-md) var(--spacing-lg);
//     border-radius: var(--ui-border-radius-lg);
//     border-bottom-left-radius: var(--ui-border-radius-sm);
//     background: var(--bg-primary);
//     border: var(--ui-border-width) solid var(--border-secondary);
//     box-shadow: var(--shadow-sm);
//     transition: var(--transition-base);

//     .text-content {
//       line-height: var(--line-height-relaxed);
//       font-size: var(--font-size-base);
//     }

//     .btn-delete {
//       position: absolute;
//       top: -8px; right: -8px;
//       background: var(--bg-primary);
//       border: var(--ui-border-width) solid var(--color-error);
//       color: var(--color-error);
//       width: 20px; height: 20px;
//       border-radius: 50%;
//       cursor: pointer;
//       opacity: 0;
//       transform: scale(0.8);
//       transition: var(--transition-fast);
//       display: grid; place-items: center;
//       font-size: 0.6rem;
//     }

//     &:hover .btn-delete { opacity: 1; transform: scale(1); }
//   }

//   &.mine {
//     flex-direction: row-reverse;
//     margin-left: auto;

//     .bubble {
//       background: var(--accent-gradient);
//       color: white;
//       border: none;
//       border-radius: var(--ui-border-radius-lg);
//       border-bottom-right-radius: var(--ui-border-radius-sm);
//       box-shadow: var(--shadow-md);
//     }
//     .message-meta { text-align: right; }
//   }
// }

// /* --- COMPOSER --- */
// .composer-area {
//   padding: 0 var(--spacing-xl) var(--spacing-xl);
// }

// .composer-glass {
//   background: var(--glass-bg-c);
//   backdrop-filter: blur(var(--glass-blur-c));
//   border: var(--ui-border-width) solid var(--glass-border-c);
//   border-radius: var(--ui-border-radius-xl);
//   padding: var(--spacing-sm);
//   display: flex;
//   align-items: center;
//   gap: var(--spacing-sm);
//   box-shadow: var(--shadow-lg);
//   transition: var(--transition-base);

//   &:focus-within {
//     box-shadow: var(--shadow-xl);
//     border-color: var(--accent-primary);
//     background: var(--bg-primary);
//   }

//   .input-message {
//     flex: 1;
//     border: none;
//     background: transparent;
//     padding: var(--spacing-md);
//     font-size: var(--font-size-base);
//     color: var(--text-primary);
//     outline: none;
//     &::placeholder { color: var(--text-tertiary); opacity: var(--state-disabled-opacity); }
//   }

//   .btn-send {
//     width: 36px; height: 36px;
//     border-radius: var(--ui-border-radius-lg);
//     border: none;
//     background: var(--accent-gradient);
//     color: white;
//     cursor: pointer;
//     transition: var(--transition-transform);
    
//     &:hover:not(:disabled) { transform: translateY(-1px); box-shadow: var(--shadow-md); }
//     &:disabled { background: var(--color-disabled); opacity: var(--state-disabled-opacity); cursor: not-allowed; }
//   }
// }

// /* --- MODAL (Glass Upgraded) --- */
// .modal-backdrop {
//   position: fixed; inset: 0;
//   background: rgba(0,0,0,0.2);
//   backdrop-filter: blur(var(--glass-blur-c));
//   z-index: var(--z-modal-backdrop);
//   display: flex; align-items: center; justify-content: center;
//   animation: fadeIn var(--transition-fast);
// }

// .glass-modal {
//   width: 400px;
//   background: var(--bg-primary);
//   border: var(--ui-border-width) solid var(--border-primary);
//   border-radius: var(--ui-border-radius-xl);
//   box-shadow: var(--shadow-5xl);
//   overflow: hidden;
//   animation: slideUp var(--transition-slow);

//   .modal-header {
//     padding: var(--spacing-lg) var(--spacing-xl);
//     display: flex; justify-content: space-between; align-items: center;
//     border-bottom: var(--ui-border-width) solid var(--border-secondary);
//     h3 { margin: 0; font-family: var(--font-heading); font-size: var(--font-size-lg); }
//   }

//   .modal-body {
//     padding: var(--spacing-xl);
//     .form-group label { 
//       font-size: var(--font-size-xs); 
//       font-weight: var(--font-weight-bold);
//       color: var(--text-label);
//       text-transform: uppercase;
//       margin-bottom: var(--spacing-xs);
//     }
    
//     .input-wrapper {
//       background: var(--bg-ternary);
//       border: var(--ui-border-width) solid var(--border-secondary);
//       border-radius: var(--ui-border-radius);
//       transition: var(--transition-colors);
//       &:focus-within { 
//         border-color: var(--accent-primary); 
//         box-shadow: 0 0 0 var(--focus-ring-width) var(--focus-ring-color); 
//       }
//     }
//   }

//   .modal-footer {
//     padding: var(--spacing-lg) var(--spacing-xl);
//     background: var(--bg-secondary);
//     display: flex; justify-content: flex-end; gap: var(--spacing-md);
//   }
// }

// /* --- ANIMATIONS --- */
// @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
// @keyframes slideUp { 
//   from { transform: translateY(12px); opacity: 0; } 
//   to { transform: translateY(0); opacity: 1; } 
// }
// /* Add these to your Sidebar styles for better alignment */
// .org-info {
//   display: flex;
//   flex-direction: column;
//   gap: 2px;
// }

// .channel-list {
//   display: flex;
//   flex-direction: column;
// }

// .channel-info {
//   display: flex;
//   align-items: center;
//   gap: 8px;
// }

// /* Fix for the Switch/Checkbox in the modal */
// .form-group.checkbox {
//   .switch-label {
//     display: flex;
//     align-items: center;
//     gap: 10px;
//     cursor: pointer;
//     font-size: var(--font-size-sm);
    
//     input[type="checkbox"] {
//       width: 16px;
//       height: 16px;
//       accent-color: var(--accent-primary);
//     }
//   }
// }

// .members-select-area {
//   margin-top: var(--spacing-lg);
//   .label-sm {
//     display: block;
//     color: var(--text-tertiary);
//     margin-bottom: var(--spacing-xs);
//     text-transform: uppercase;
//     font-weight: 700;
//   }
// }

// @media (max-width: 768px) {
//   .sidebar {
//     position: absolute;
//     z-index: var(--z-fixed);
//     height: 100%;
//   }

//   .chat-main {
//     width: 100%;
//   }

//   .messages-container {
//     padding: var(--spacing-md);
//   }

//   .message-group {
//     max-width: 88%;
//   }
// }
