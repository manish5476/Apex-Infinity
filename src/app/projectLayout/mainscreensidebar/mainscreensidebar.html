<aside class="sidebar-container"
       [class.expanded]="layout.isExpanded()"
       [class.mobile-open]="layout.isMobile() && layout.isMobileMenuOpen()"
       (mouseenter)="layout.isHovered.set(true)"
       (mouseleave)="layout.isHovered.set(false)">

  <div class="sidebar-inner">
    <div class="menu-list custom-scrollbar">
      
      @for (item of menuItems; track item.label) {
        <div class="menu-item-wrapper" [class.active-parent]="isParentActive(item)">
          
          @if (!item.items) {
            <a [routerLink]="item.routerLink"
               routerLinkActive="active-link"
               [routerLinkActiveOptions]="{ exact: true }"
               class="menu-title">
              <i [class]="item.icon + ' menu-icon'"></i>
              <span class="menu-label" [class.visible-text]="layout.isExpanded()">
                {{ item.label }}
              </span>
            </a>
          } 
          
          @else {
            <div class="menu-title" (click)="toggleMenuItem(item.label)">
              <i [class]="item.icon + ' menu-icon'"></i>
              <span class="menu-label" [class.visible-text]="layout.isExpanded()">
                {{ item.label }}
              </span>
              <i class="pi pi-angle-down menu-arrow"
                 [class.rotate-180]="expandedItems[item.label]"
                 [style.opacity]="layout.isExpanded() ? 1 : 0"></i>
            </div>

            <div class="submenu" 
                 [class.submenu-expanded]="expandedItems[item.label] && layout.isExpanded()">
              @for (subItem of item.items; track subItem.label) {
                <a [routerLink]="subItem.routerLink"
                   routerLinkActive="active-link"
                   [routerLinkActiveOptions]="{ exact: true }"
                   class="submenu-link">
                  <i [class]="subItem.icon + ' submenu-icon'"></i>
                  <span>{{ subItem.label }}</span>
                </a>
              }
            </div>
          }
        </div>
      }
    </div>

    <div class="sidebar-footer" [class.visible-footer]="layout.isExpanded()">
      <button class="logout-btn" (click)="logout()">
        <i class="pi pi-sign-out"></i>
        @if (layout.isExpanded()) { <span>Logout</span> }
      </button>
    </div>
  </div>
</aside>

@if (!layout.isPinned() && !layout.isHovered() && !layout.isMobile()) {
  <div class="hover-trigger" (mouseenter)="layout.isHovered.set(true)"></div>
}
<!-- 
<div class="sidebar-container"
  [ngClass]="{ 'collapsed': !isPinned && !isHovered, 'expanded': isPinned || isHovered }"
  (mouseenter)="mouseEnter.emit()"
  (mouseleave)="mouseLeave.emit()">

  <div class="sidebar-inner">
    <div class="menu-list">

      <div *ngFor="let item of menuItems"
        class="menu-item-wrapper"
        [class.active-parent]="expandedItems[item.label]"
        (mouseleave)="onMenuTitleLeave(item.label)">

        Single-level link
        <a *ngIf="!item.items; else multiItem"
          [routerLink]="item.routerLink"
          routerLinkActive="active-link"
          [routerLinkActiveOptions]="{ exact: true }"
          class="menu-title">

          <i [class]="item.icon + ' menu-icon'"></i>
          <span class="menu-label"
            [ngClass]="{ 'hidden-text': !isPinned && !isHovered, 'visible-text': isPinned || isHovered }">
            {{ item.label }}
          </span>
        </a>

        Multi-level menu
        <ng-template #multiItem>
          <div class="menu-title"
            (click)="toggleMenuItem(item.label)"
            (mouseenter)="onMenuTitleEnter(item.label)">

            <i [class]="item.icon + ' menu-icon'"></i>
            <span class="menu-label"
              [ngClass]="{ 'hidden-text': !isPinned && !isHovered, 'visible-text': isPinned || isHovered }">
              {{ item.label }}
            </span>

            <i class="pi pi-angle-down menu-arrow"
              [ngClass]="expandedItems[item.label] ? 'rotate-180' : 'rotate-0'"
              [style.opacity]="(isPinned || isHovered) ? 1 : 0"></i>
          </div>

          <div class="submenu"
            [ngClass]="expandedItems[item.label] ? 'submenu-expanded' : 'submenu-collapsed'">

            <a *ngFor="let subItem of item.items"
              [routerLink]="subItem.routerLink"
              routerLinkActive="active-link"
              [routerLinkActiveOptions]="{ exact: true }"
              class="submenu-link">

              <i [class]="subItem.icon + ' submenu-icon'"></i>
              <span>{{ subItem.label }}</span>
            </a>
          </div>
        </ng-template>
      </div>
    </div>

    <div class="sidebar-footer"
      [ngClass]="{ 'hidden-footer': !isPinned && !isHovered, 'visible-footer': isPinned || isHovered }">

      <button pButton label="Logout" icon="pi pi-sign-out" class="logout-btn" (click)="logout()"></button>
    </div>
  </div>
</div>

<div class="hover-trigger"
  (mouseenter)="mouseEnterTriggerZone.emit()"
  *ngIf="!isPinned && !isHovered"></div> -->
