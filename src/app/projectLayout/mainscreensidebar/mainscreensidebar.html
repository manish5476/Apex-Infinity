<aside
  class="sidebar-container"
  [class.expanded]="layout.isExpanded()"
  [class.mobile]="layout.isMobile()"
  (mouseenter)="layout.isDesktop() && layout.isHovered.set(true)"
  (mouseleave)="layout.isDesktop() && layout.isHovered.set(false)">

  <div class="sidebar-panel" (keydown)="onKeyNavigate($event)">
    
    <div class="menu-list" #menuList>
      @for (item of menuItems; track item.label; let i = $index) {
        <div class="menu-item-wrapper" [class.active-parent]="isParentActive(item)">
          
          @if (!item.items) {
            <a 
              [routerLink]="item.routerLink"
              routerLinkActive="active-link"
              class="menu-title"
              tabindex="0">
              <i [class]="item.icon + ' menu-icon'"></i>
              <span class="menu-label" [class.visible]="layout.isExpanded()">
                {{ item.label }}
              </span>
            </a>
          } 
          
          @else {
            <div 
              class="menu-title"
              (click)="toggleMenuItem(item.label)"
              tabindex="0"
              [attr.aria-expanded]="expandedItems[item.label]">
              <i [class]="item.icon + ' menu-icon'"></i>
              <span class="menu-label" [class.visible]="layout.isExpanded()">
                {{ item.label }}
              </span>
              <i class="pi pi-chevron-down menu-arrow" 
                 *ngIf="layout.isExpanded()"
                 [class.rotate]="expandedItems[item.label]"></i>
            </div>

            <div 
              class="submenu"
              [style.maxHeight]="getSubmenuHeight(item)"
              [class.open]="expandedItems[item.label] && layout.isExpanded()">
              @for (sub of item.items; track sub.label) {
                <a 
                  [routerLink]="sub.routerLink"
                  routerLinkActive="active-link"
                  class="submenu-link">
                  <span>{{ sub.label }}</span>
                </a>
              }
            </div>
          }
        </div>
      }
    </div>

    <footer class="sidebar-footer">
      <button (click)="logout()">
        <i class="pi pi-sign-out"></i>
        <span *ngIf="layout.isExpanded()">Logout</span>
      </button>
    </footer>

  </div>
</aside>