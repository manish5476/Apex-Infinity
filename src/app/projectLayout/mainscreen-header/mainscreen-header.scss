/* ==========================================================================
   ENHANCED HEADER & DIALOG DESIGN
   ========================================================================== */

:host {
  display: block;
  z-index: 1000;
}

/* -------------------------
   HEADER STYLES
   ------------------------- */
.header-inner {
  height: 64px;
  padding: 0 var(--spacing-xl);
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  z-index: 100;
  backdrop-filter: blur(10px);
}

.header-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);

  .menu-toggle-btn {
    width: 40px;
    height: 40px;
    border-radius: var(--ui-border-radius-lg);
    border: 1px solid var(--border-primary);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;

    &:hover {
      background: var(--component-bg-hover);
      color: var(--text-primary);
      border-color: var(--border-secondary);
      transform: translateY(-1px);
    }
  }

  .logo-link {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    text-decoration: none;
    font-weight: 700;
    font-size: 1.25rem;
    color: var(--text-primary);
    transition: opacity 0.2s ease;

    &:hover {
      opacity: 0.8;
    }

    .logo-image {
      height: 36px;
      width: auto;
      display: block;
    }

    .logo-text {
      font-size: 1.375rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
  }
}

.header-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);

  .notification-btn {
    position: relative;
    width: 40px;
    height: 40px;
    border-radius: var(--ui-border-radius-lg);
    border: 1px solid var(--border-primary);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;

    &:hover {
      background: var(--component-bg-hover);
      color: var(--accent-primary);
      border-color: var(--border-secondary);
    }

    .notification-count {
      position: absolute;
      top: -4px;
      right: -4px;
      background: var(--color-error);
      color: white;
      font-size: 0.7rem;
      font-weight: 700;
      min-width: 18px;
      height: 18px;
      border-radius: 9px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--bg-primary);
      animation: pulse 2s infinite;
    }
  }

  .user-profile-trigger {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm) var(--spacing-xs) var(--spacing-xs);
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: var(--ui-border-radius-xl);
    cursor: pointer;
    transition: all 0.2s ease;
    min-height: 40px;

    &:hover {
      background: var(--component-bg-hover);
      border-color: var(--border-secondary);
      transform: translateY(-1px);
      box-shadow: var(--shadow-sm);
    }

    .user-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-start;

      .name {
        font-size: var(--font-size-sm);
        font-weight: 600;
        color: var(--text-primary);
      }

      .role {
        font-size: var(--font-size-xs);
        color: var(--text-tertiary);
      }
    }
  }

  .login-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--accent-primary);
    color: white;
    border-radius: var(--ui-border-radius-lg);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;

    &:hover {
      background: var(--accent-secondary);
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }
  }
}

/* -------------------------
   DIALOG OVERRIDES
   ------------------------- */
:host ::ng-deep {
  .profile-dialog,
  .notification-dialog {
    .p-dialog-content {
      padding: 0 !important;
      border-radius: 20px !important;
      overflow: hidden !important;
      background: var(--bg-primary) !important;
    }
    
    .p-dialog-mask {
      background: rgba(0, 0, 0, 0.4) !important;
      backdrop-filter: blur(4px);
    }
  }
}

/* -------------------------
   PROFILE DIALOG STYLES
   ------------------------- */
.dialog-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  overflow: hidden;
}

/* Dialog Header */
.dialog-header {
  padding: var(--spacing-xl);
  background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
  position: relative;

  .user-profile-section {
    display: flex;
    gap: var(--spacing-lg);
    align-items: center;
    position: relative;

    ::ng-deep .p-avatar {
      width: 72px !important;
      height: 72px !important;
      font-size: 1.75rem !important;
      border: 3px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .user-info {
      flex: 1;

      .user-name {
        margin: 0 0 var(--spacing-xs);
        color: white;
        font-size: 1.5rem;
        font-weight: 700;
        line-height: 1.2;
      }

      .user-email {
        margin: 0 0 var(--spacing-sm);
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.875rem;
      }

      .user-badges {
        display: flex;
        gap: var(--spacing-sm);
        flex-wrap: wrap;

        .role-badge,
        .status-badge {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          background: rgba(255, 255, 255, 0.2);
          color: white;
          padding: var(--spacing-xs) var(--spacing-sm);
          border-radius: var(--ui-border-radius);
          font-size: 0.75rem;
          font-weight: 600;
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.1);

          i {
            font-size: 0.75rem;
          }
        }

        .status-badge i {
          color: #10b981;
        }
      }
    }

    .close-dialog-btn {
      position: absolute;
      top: -10px;
      right: -10px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.1);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      z-index: 10;

      &:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.1);
      }
    }
  }
}

/* Dialog Tabs */
.dialog-tabs {
  background: var(--bg-primary);
  position: sticky;
  top: 0;
  z-index: 10;
  border-bottom: 1px solid var(--border-primary);

  .tabs-container {
    display: flex;
    padding: 0 var(--spacing-xl);

    .tab-btn {
      flex: 1;
      padding: var(--spacing-md);
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: var(--font-size-sm);
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-sm);
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;

      &:hover {
        color: var(--text-primary);
      }

      &.active {
        color: var(--accent-primary);
        border-bottom-color: var(--accent-primary);
      }

      .tab-badge {
        background: var(--color-error);
        color: white;
        font-size: 0.7rem;
        font-weight: 700;
        min-width: 20px;
        height: 20px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: pulse 2s infinite;
      }
    }
  }
}

/* Scrollable Dialog Content */
.dialog-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: var(--spacing-xl);
  background: var(--bg-primary);
  height: 400px; /* Fixed scrollable height */

  /* Custom scrollbar */
  &::-webkit-scrollbar {
    width: 6px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: var(--scroll-thumb-c);
    border-radius: 3px;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }

  /* Gradient fade at bottom */
  &::after {
    content: '';
    position: sticky;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 30px;
    background: linear-gradient(to bottom, transparent, var(--bg-primary));
    pointer-events: none;
  }
}

/* Section Cards */
.section-card {
  background: var(--bg-secondary);
  border-radius: var(--ui-border-radius-xl);
  padding: var(--spacing-xl);
  margin-bottom: var(--spacing-lg);
  border: 1px solid var(--border-primary);
  box-shadow: var(--shadow-sm);

  &:last-child {
    margin-bottom: 0;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);

    .section-title {
      margin: 0;
      font-size: var(--font-size-md);
      font-weight: 700;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .dark-mode-toggle {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);

      .toggle-label {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
        font-weight: 500;
      }

      ::ng-deep .p-togglebutton {
        width: 60px;
        height: 30px;
        border-radius: 15px;

        &.p-highlight {
          background: var(--accent-primary) !important;
          border-color: var(--accent-primary) !important;
        }

        .p-button {
          width: 26px;
          height: 26px;
        }
      }
    }
  }

  .section-subtitle {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-secondary);
    margin: 0 0 var(--spacing-md);
  }
}

/* Theme Presets */
.theme-presets-section {
  margin-bottom: var(--spacing-xl);

  .theme-presets-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-md);

    .preset-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-sm);
      cursor: pointer;

      .preset-preview {
        width: 56px;
        height: 56px;
        border-radius: var(--ui-border-radius-lg);
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
        transition: all 0.2s ease;

        &:hover {
          transform: scale(1.05);
          box-shadow: var(--shadow-md);
        }

        .preset-preview-content {
          position: absolute;
          inset: 6px;
          display: flex;
          flex-direction: column;
          gap: 2px;

          .preview-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 2px;

            &.short {
              width: 70%;
            }

            &.medium {
              width: 85%;
            }
          }
        }

        .active-check {
          position: absolute;
          top: -6px;
          right: -6px;
          background: var(--accent-primary);
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 0.75rem;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
      }

      &.active .preset-preview {
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(var(--accent-primary-rgb), 0.2);
      }

      .preset-name {
        font-size: var(--font-size-xs);
        color: var(--text-secondary);
        font-weight: 500;
        text-align: center;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
    }
  }
}

/* Accent Colors */
.accent-colors-section {
  .accent-colors-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--spacing-sm);

    .color-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-xs);
      cursor: pointer;

      .color-circle {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 2px solid var(--border-primary);
        transition: all 0.2s ease;

        &:hover {
          transform: scale(1.1);
          box-shadow: var(--shadow-sm);
        }
      }

      .color-name {
        font-size: var(--font-size-xs);
        color: var(--text-tertiary);
      }
    }
  }
}

/* Quick Actions */
.quick-actions-card {
  .actions-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-md);

    .action-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-sm);
      padding: var(--spacing-lg);
      background: var(--bg-ternary);
      border: 1px solid var(--border-primary);
      border-radius: var(--ui-border-radius-lg);
      cursor: pointer;
      transition: all 0.2s ease;

      &:hover {
        background: var(--component-bg-hover);
        border-color: var(--border-secondary);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      .action-icon {
        width: 48px;
        height: 48px;
        border-radius: var(--ui-border-radius);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.25rem;

        &.random-theme { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        &.reset-default { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
      }

      span {
        font-size: var(--font-size-sm);
        font-weight: 600;
        color: var(--text-primary);
      }
    }
  }
}

/* Account Links */
.account-section {
  .account-links {
    .account-link {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      padding: var(--spacing-md);
      background: transparent;
      border: none;
      border-radius: var(--ui-border-radius-lg);
      text-decoration: none;
      cursor: pointer;
      transition: all 0.2s ease;

      &:hover {
        background: var(--component-bg-hover);

        .link-icon {
          transform: scale(1.1);
        }

        .link-arrow {
          transform: translateX(4px);
        }
      }

      .link-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--ui-border-radius);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.125rem;
        transition: transform 0.2s ease;

        &.profile { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        &.security { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        &.billing { background: rgba(139, 92, 246, 0.1); color: #8b5cf6; }
      }

      .link-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: flex-start;

        .link-title {
          font-size: var(--font-size-sm);
          font-weight: 600;
          color: var(--text-primary);
          margin-bottom: var(--spacing-xs);
        }

        .link-subtitle {
          font-size: var(--font-size-xs);
          color: var(--text-tertiary);
        }
      }

      .link-arrow {
        color: var(--text-tertiary);
        transition: transform 0.2s ease;
      }
    }
  }
}

/* Sign Out Button */
.signout-btn {
  width: 100%;
  margin-top: var(--spacing-lg);
  padding: var(--spacing-lg);
  background: linear-gradient(135deg, var(--color-error) 0%, #dc2626 100%);
  border: none;
  border-radius: var(--ui-border-radius-lg);
  color: white;
  font-size: var(--font-size-md);
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  transition: all 0.2s ease;
  box-shadow: var(--shadow-md);

  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
}

/* Notifications Content */
.notifications-content {
  .notifications-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);

    h5 {
      margin: 0;
      font-size: var(--font-size-lg);
      font-weight: 700;
      color: var(--text-primary);
    }

    .notifications-actions {
      display: flex;
      gap: var(--spacing-sm);

      .action-btn {
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
        padding: var(--spacing-xs) var(--spacing-sm);
        background: var(--bg-ternary);
        border: 1px solid var(--border-primary);
        border-radius: var(--ui-border-radius);
        color: var(--text-secondary);
        font-size: var(--font-size-xs);
        cursor: pointer;
        transition: all 0.2s ease;

        &:hover {
          background: var(--component-bg-hover);
          color: var(--text-primary);
        }
      }
    }
  }

  .notifications-list {
    .notification-item {
      display: flex;
      align-items: flex-start;
      gap: var(--spacing-md);
      padding: var(--spacing-lg);
      background: var(--bg-secondary);
      border-radius: var(--ui-border-radius-lg);
      margin-bottom: var(--spacing-md);
      border: 1px solid transparent;
      transition: all 0.2s ease;
      position: relative;

      &:hover {
        border-color: var(--border-secondary);
        transform: translateY(-1px);
        box-shadow: var(--shadow-sm);
      }

      &.unread {
        background: linear-gradient(to right, rgba(var(--accent-primary), 0.05), var(--bg-secondary));
        border-left: 3px solid var(--accent-primary);
      }

      .notification-icon {
        width: 48px;
        height: 48px;
        border-radius: var(--ui-border-radius);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;

        &.info { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        &.success { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        &.warning { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
        &.error { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
      }

      .notification-content {
        flex: 1;
        min-width: 0;

        .notification-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: var(--spacing-xs);

          .notification-title {
            font-size: var(--font-size-md);
            font-weight: 600;
            color: var(--text-primary);
          }

          .notification-time {
            font-size: var(--font-size-xs);
            color: var(--text-tertiary);
          }
        }

        .notification-message {
          margin: 0;
          font-size: var(--font-size-sm);
          color: var(--text-secondary);
          line-height: 1.5;
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      }

      .unread-indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--accent-primary);
        position: absolute;
        top: var(--spacing-md);
        right: var(--spacing-md);
        box-shadow: 0 0 0 2px var(--bg-secondary);
      }
    }

    .empty-notifications {
      text-align: center;
      padding: var(--spacing-3xl) var(--spacing-xl);
      background: var(--bg-secondary);
      border-radius: var(--ui-border-radius-lg);
      border: 2px dashed var(--border-primary);

      i {
        font-size: 3rem;
        color: var(--text-muted);
        margin-bottom: var(--spacing-lg);
        opacity: 0.5;
      }

      h6 {
        margin: 0 0 var(--spacing-xs);
        font-size: var(--font-size-md);
        font-weight: 700;
        color: var(--text-primary);
      }

      p {
        margin: 0;
        font-size: var(--font-size-sm);
        color: var(--text-tertiary);
      }
    }
  }

  .notifications-footer {
    margin-top: var(--spacing-lg);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--border-primary);

    .view-all-link {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-xs);
      color: var(--accent-primary);
      text-decoration: none;
      font-size: var(--font-size-sm);
      font-weight: 600;
      transition: all 0.2s ease;

      &:hover {
        gap: var(--spacing-sm);

        i {
          transform: translateX(3px);
        }
      }

      i {
        transition: transform 0.2s ease;
      }
    }
  }
}

/* Notification Dialog Header */
.notification-dialog-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-xl);
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-primary);

  h3 {
    margin: 0;
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--text-primary);
  }

  .close-dialog-btn {
    width: 36px;
    height: 36px;
    border-radius: var(--ui-border-radius);
    border: 1px solid var(--border-primary);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;

    &:hover {
      background: var(--component-bg-hover);
      color: var(--text-primary);
      border-color: var(--border-secondary);
    }
  }
}

/* Animations */
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* Responsive */
@media (max-width: 768px) {
  .header-inner {
    padding: 0 var(--spacing-md);
  }

  .logo-link .logo-text {
    display: none;
  }

  .user-meta {
    display: none !important;
  }

  :host ::ng-deep {
    .profile-dialog,
    .notification-dialog {
      .p-dialog {
        width: calc(100vw - 20px) !important;
        max-width: calc(100vw - 20px) !important;
        max-height: 85vh !important;
      }
    }
  }

  .theme-presets-grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }

  .accent-colors-grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }

  .actions-grid {
    grid-template-columns: 1fr !important;
  }
}

@media (max-width: 480px) {
  .theme-presets-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  .accent-colors-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  .dialog-header {
    padding: var(--spacing-lg);
  }

  .dialog-content {
    padding: var(--spacing-lg);
  }
}

// /* ==========================================================================
//    ENHANCED HEADER & POPOVER DESIGN
//    ========================================================================== */

// :host {
//   display: block;
//   z-index: 1000;
// }

// /* -------------------------
//    HEADER STYLES
//    ------------------------- */
// .header-inner {
//   height: 64px;
//   padding: 0 var(--spacing-xl);
//   background: var(--bg-primary);
//   border-bottom: 1px solid var(--border-primary);
//   display: flex;
//   align-items: center;
//   justify-content: space-between;
//   position: relative;
//   z-index: 100;
//   backdrop-filter: blur(10px);
// }

// .header-left {
//   display: flex;
//   align-items: center;
//   gap: var(--spacing-md);

//   .menu-toggle-btn {
//     width: 40px;
//     height: 40px;
//     border-radius: var(--ui-border-radius-lg);
//     border: 1px solid var(--border-primary);
//     background: var(--bg-secondary);
//     color: var(--text-secondary);
//     cursor: pointer;
//     display: flex;
//     align-items: center;
//     justify-content: center;
//     transition: all 0.2s ease;

//     &:hover {
//       background: var(--component-bg-hover);
//       color: var(--text-primary);
//       border-color: var(--border-secondary);
//       transform: translateY(-1px);
//     }
//   }

//   .logo-link {
//     display: flex;
//     align-items: center;
//     gap: var(--spacing-sm);
//     text-decoration: none;
//     font-weight: 700;
//     font-size: 1.25rem;
//     color: var(--text-primary);
//     transition: opacity 0.2s ease;

//     &:hover {
//       opacity: 0.8;
//     }

//     .logo-image {
//       height: 36px;
//       width: auto;
//       display: block;
//     }

//     .logo-text {
//       font-size: 1.375rem;
//       font-weight: 800;
//       background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
//       -webkit-background-clip: text;
//       -webkit-text-fill-color: transparent;
//       background-clip: text;
//     }
//   }
// }

// .header-right {
//   display: flex;
//   align-items: center;
//   gap: var(--spacing-md);

//   .notification-btn {
//     position: relative;
//     width: 40px;
//     height: 40px;
//     border-radius: var(--ui-border-radius-lg);
//     border: 1px solid var(--border-primary);
//     background: var(--bg-secondary);
//     color: var(--text-secondary);
//     cursor: pointer;
//     display: flex;
//     align-items: center;
//     justify-content: center;
//     transition: all 0.2s ease;

//     &:hover {
//       background: var(--component-bg-hover);
//       color: var(--accent-primary);
//       border-color: var(--border-secondary);
//     }

//     .notification-count {
//       position: absolute;
//       top: -4px;
//       right: -4px;
//       background: var(--color-error);
//       color: white;
//       font-size: 0.7rem;
//       font-weight: 700;
//       min-width: 18px;
//       height: 18px;
//       border-radius: 9px;
//       display: flex;
//       align-items: center;
//       justify-content: center;
//       border: 2px solid var(--bg-primary);
//       animation: pulse 2s infinite;
//     }
//   }

//   .user-profile-trigger {
//     display: flex;
//     align-items: center;
//     gap: var(--spacing-sm);
//     padding: var(--spacing-xs) var(--spacing-sm) var(--spacing-xs) var(--spacing-xs);
//     background: var(--bg-secondary);
//     border: 1px solid var(--border-primary);
//     border-radius: var(--ui-border-radius-xl);
//     cursor: pointer;
//     transition: all 0.2s ease;
//     min-height: 40px;

//     &:hover {
//       background: var(--component-bg-hover);
//       border-color: var(--border-secondary);
//       transform: translateY(-1px);
//       box-shadow: var(--shadow-sm);
//     }

//     .user-meta {
//       display: flex;
//       flex-direction: column;
//       align-items: flex-start;

//       .name {
//         font-size: var(--font-size-sm);
//         font-weight: 600;
//         color: var(--text-primary);
//       }

//       .role {
//         font-size: var(--font-size-xs);
//         color: var(--text-tertiary);
//       }
//     }

//     i.rotate-180 {
//       transform: rotate(180deg);
//     }
//   }

//   .login-btn {
//     display: flex;
//     align-items: center;
//     gap: var(--spacing-sm);
//     padding: var(--spacing-sm) var(--spacing-lg);
//     background: var(--accent-primary);
//     color: white;
//     border-radius: var(--ui-border-radius-lg);
//     text-decoration: none;
//     font-weight: 600;
//     transition: all 0.2s ease;

//     &:hover {
//       background: var(--accent-secondary);
//       transform: translateY(-1px);
//       box-shadow: var(--shadow-md);
//     }
//   }
// }

// /* -------------------------
//    ENHANCED POPOVER STYLES
//    ------------------------- */
// :host ::ng-deep .premium-popover-override {
//   min-width: 420px !important;
//   max-width: 420px !important;
//   border: none !important;
//   background: transparent !important;
//   box-shadow: none !important;
//   margin-top: 12px !important;

//   /* Hide arrow */
//   &.p-popover-top::after,
//   &.p-popover-top::before,
//   &.p-popover-bottom::after,
//   &.p-popover-bottom::before {
//     display: none !important;
//   }

//   .p-popover-content {
//     background: transparent !important;
//     padding: 0 !important;
//     border-radius: 24px !important;
//     overflow: hidden !important;
//     box-shadow: var(--shadow-2xl) !important;
//     border: 1px solid var(--border-primary) !important;
//     backdrop-filter: blur(20px) saturate(180%);
//     -webkit-backdrop-filter: blur(20px) saturate(180%);
//     background: var(--glass-bg-c) !important;
//     max-height: min(85vh, 650px) !important;
//     display: flex !important;
//     flex-direction: column !important;
//   }
// }

// /* Popover Container */
// .popover-container {
//   display: flex;
//   flex-direction: column;
//   height: 100%;
//   width: 100%;
// }

// /* Popover Header */
// .popover-header {
//   padding: var(--spacing-xl);
//   background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
//   border-bottom: 1px solid rgba(255, 255, 255, 0.1);

//   .user-profile-section {
//     display: flex;
//     gap: var(--spacing-lg);
//     align-items: center;
//     position: relative;

//     ::ng-deep .p-avatar {
//       width: 72px !important;
//       height: 72px !important;
//       font-size: 1.75rem !important;
//       border: 3px solid rgba(255, 255, 255, 0.3);
//       box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
//     }

//     .user-info {
//       flex: 1;

//       .user-name {
//         margin: 0 0 var(--spacing-xs);
//         color: white;
//         font-size: 1.5rem;
//         font-weight: 700;
//         line-height: 1.2;
//       }

//       .user-email {
//         margin: 0 0 var(--spacing-sm);
//         color: rgba(255, 255, 255, 0.8);
//         font-size: 0.875rem;
//       }

//       .user-badges {
//         display: flex;
//         gap: var(--spacing-sm);
//         flex-wrap: wrap;

//         .role-badge,
//         .status-badge {
//           display: inline-flex;
//           align-items: center;
//           gap: var(--spacing-xs);
//           background: rgba(255, 255, 255, 0.2);
//           color: white;
//           padding: var(--spacing-xs) var(--spacing-sm);
//           border-radius: var(--ui-border-radius);
//           font-size: 0.75rem;
//           font-weight: 600;
//           backdrop-filter: blur(10px);
//           border: 1px solid rgba(255, 255, 255, 0.1);

//           i {
//             font-size: 0.75rem;
//           }
//         }

//         .status-badge i {
//           color: #10b981;
//         }
//       }
//     }

//     .edit-profile-btn {
//       width: 36px;
//       height: 36px;
//       border-radius: var(--ui-border-radius);
//       border: 1px solid rgba(255, 255, 255, 0.3);
//       background: rgba(255, 255, 255, 0.1);
//       color: white;
//       cursor: pointer;
//       display: flex;
//       align-items: center;
//       justify-content: center;
//       transition: all 0.2s ease;
//       backdrop-filter: blur(10px);

//       &:hover {
//         background: rgba(255, 255, 255, 0.2);
//         transform: scale(1.1);
//       }
//     }
//   }
// }

// /* Tabs Container */
// .popover-tabs-container {
//   padding: var(--spacing-lg) var(--spacing-xl) 0;
//   background: var(--bg-primary);
//   position: sticky;
//   top: 0;
//   z-index: 10;
// }

// .popover-tabs {
//   display: flex;
//   background: var(--bg-secondary);
//   border-radius: var(--ui-border-radius-lg);
//   padding: var(--spacing-xs);
//   position: relative;
//   border: 1px solid var(--border-primary);

//   .tab-indicator {
//     position: absolute;
//     top: var(--spacing-xs);
//     bottom: var(--spacing-xs);
//     left: var(--spacing-xs);
//     width: calc(50% - var(--spacing-xs));
//     background: var(--accent-primary);
//     border-radius: var(--ui-border-radius);
//     transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
//     z-index: 1;
//     box-shadow: 0 2px 8px rgba(var(--accent-primary-rgb), 0.3);
//   }

//   .tab-btn {
//     flex: 1;
//     position: relative;
//     z-index: 2;
//     padding: var(--spacing-sm) var(--spacing-md);
//     border: none;
//     background: transparent;
//     color: var(--text-secondary);
//     font-size: var(--font-size-sm);
//     font-weight: 600;
//     cursor: pointer;
//     border-radius: var(--ui-border-radius);
//     display: flex;
//     align-items: center;
//     justify-content: center;
//     gap: var(--spacing-sm);
//     transition: all 0.2s ease;

//     &:hover {
//       color: var(--text-primary);
//     }

//     &.active {
//       color: white;
//     }

//     .notification-indicator {
//       background: var(--color-error);
//       color: white;
//       font-size: 0.7rem;
//       font-weight: 700;
//       min-width: 20px;
//       height: 20px;
//       border-radius: 10px;
//       display: flex;
//       align-items: center;
//       justify-content: center;
//       animation: pulse 2s infinite;
//     }
//   }
// }

// /* Scrollable Body */
// .popover-scroll-body {
//   flex: 1;
//   overflow-y: auto;
//   overflow-x: hidden;
//   padding: var(--spacing-xl);
//   background: var(--bg-primary);

//   /* Custom scrollbar */
//   &::-webkit-scrollbar {
//     width: 6px;
//   }

//   &::-webkit-scrollbar-track {
//     background: transparent;
//   }

//   &::-webkit-scrollbar-thumb {
//     background: var(--scroll-thumb-c);
//     border-radius: 3px;
//   }

//   &::-webkit-scrollbar-thumb:hover {
//     background: var(--text-secondary);
//   }

//   /* Gradient fade at bottom */
//   &::after {
//     content: '';
//     position: sticky;
//     bottom: -1px;
//     left: 0;
//     right: 0;
//     height: 30px;
//     background: linear-gradient(to bottom, transparent, var(--bg-primary));
//     pointer-events: none;
//   }
// }

// /* Section Cards */
// .section-card {
//   background: var(--bg-secondary);
//   border-radius: var(--ui-border-radius-xl);
//   padding: var(--spacing-xl);
//   margin-bottom: var(--spacing-lg);
//   border: 1px solid var(--border-primary);
//   box-shadow: var(--shadow-sm);

//   &:last-child {
//     margin-bottom: 0;
//   }

//   .section-header {
//     display: flex;
//     justify-content: space-between;
//     align-items: center;
//     margin-bottom: var(--spacing-lg);

//     .section-title {
//       margin: 0;
//       font-size: var(--font-size-md);
//       font-weight: 700;
//       color: var(--text-primary);
//       display: flex;
//       align-items: center;
//       gap: var(--spacing-sm);
//     }

//     .dark-mode-toggle {
//       display: flex;
//       align-items: center;
//       gap: var(--spacing-sm);

//       .toggle-label {
//         font-size: var(--font-size-sm);
//         color: var(--text-secondary);
//         font-weight: 500;
//       }

//       ::ng-deep .p-togglebutton {
//         width: 60px;
//         height: 30px;
//         border-radius: 15px;

//         &.p-highlight {
//           background: var(--accent-primary) !important;
//           border-color: var(--accent-primary) !important;
//         }

//         .p-button {
//           width: 26px;
//           height: 26px;
//         }
//       }
//     }
//   }

//   .section-subtitle {
//     font-size: var(--font-size-sm);
//     font-weight: 600;
//     color: var(--text-secondary);
//     margin: 0 0 var(--spacing-md);
//   }
// }

// /* Theme Presets */
// .theme-presets-section {
//   margin-bottom: var(--spacing-xl);

//   .theme-presets-grid {
//     display: grid;
//     grid-template-columns: repeat(4, 1fr);
//     gap: var(--spacing-md);

//     .preset-card {
//       display: flex;
//       flex-direction: column;
//       align-items: center;
//       gap: var(--spacing-sm);
//       cursor: pointer;

//       .preset-preview {
//         width: 56px;
//         height: 56px;
//         border-radius: var(--ui-border-radius-lg);
//         border: 2px solid transparent;
//         position: relative;
//         overflow: hidden;
//         transition: all 0.2s ease;

//         &:hover {
//           transform: scale(1.05);
//           box-shadow: var(--shadow-md);
//         }

//         .preset-preview-content {
//           position: absolute;
//           inset: 6px;
//           display: flex;
//           flex-direction: column;
//           gap: 2px;

//           .preview-bar {
//             height: 4px;
//             background: rgba(255, 255, 255, 0.8);
//             border-radius: 2px;

//             &.short {
//               width: 70%;
//             }

//             &.medium {
//               width: 85%;
//             }
//           }
//         }

//         .active-check {
//           position: absolute;
//           top: -6px;
//           right: -6px;
//           background: var(--accent-primary);
//           color: white;
//           width: 24px;
//           height: 24px;
//           border-radius: 50%;
//           display: flex;
//           align-items: center;
//           justify-content: center;
//           font-size: 0.75rem;
//           box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
//         }
//       }

//       &.active .preset-preview {
//         border-color: var(--accent-primary);
//         box-shadow: 0 0 0 3px rgba(var(--accent-primary-rgb), 0.2);
//       }

//       .preset-name {
//         font-size: var(--font-size-xs);
//         color: var(--text-secondary);
//         font-weight: 500;
//         text-align: center;
//         max-width: 100%;
//         overflow: hidden;
//         text-overflow: ellipsis;
//         white-space: nowrap;
//       }
//     }
//   }
// }

// /* Accent Colors */
// .accent-colors-section {
//   .accent-colors-grid {
//     display: grid;
//     grid-template-columns: repeat(6, 1fr);
//     gap: var(--spacing-sm);

//     .color-option {
//       display: flex;
//       flex-direction: column;
//       align-items: center;
//       gap: var(--spacing-xs);
//       cursor: pointer;

//       .color-circle {
//         width: 32px;
//         height: 32px;
//         border-radius: 50%;
//         border: 2px solid var(--border-primary);
//         transition: all 0.2s ease;

//         &:hover {
//           transform: scale(1.1);
//           box-shadow: var(--shadow-sm);
//         }
//       }

//       .color-name {
//         font-size: var(--font-size-xs);
//         color: var(--text-tertiary);
//       }
//     }
//   }
// }

// /* Quick Actions */
// .quick-actions-card {
//   .actions-grid {
//     display: grid;
//     grid-template-columns: repeat(2, 1fr);
//     gap: var(--spacing-md);

//     .action-item {
//       display: flex;
//       flex-direction: column;
//       align-items: center;
//       gap: var(--spacing-sm);
//       padding: var(--spacing-lg);
//       background: var(--bg-ternary);
//       border: 1px solid var(--border-primary);
//       border-radius: var(--ui-border-radius-lg);
//       cursor: pointer;
//       transition: all 0.2s ease;

//       &:hover {
//         background: var(--component-bg-hover);
//         border-color: var(--border-secondary);
//         transform: translateY(-2px);
//         box-shadow: var(--shadow-md);
//       }

//       .action-icon {
//         width: 48px;
//         height: 48px;
//         border-radius: var(--ui-border-radius);
//         display: flex;
//         align-items: center;
//         justify-content: center;
//         color: white;
//         font-size: 1.25rem;

//         &.random-theme { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
//         &.reset-default { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
//         &.export-settings { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
//         &.import-settings { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
//       }

//       span {
//         font-size: var(--font-size-sm);
//         font-weight: 600;
//         color: var(--text-primary);
//       }
//     }
//   }
// }

// /* Account Links */
// .account-section {
//   .account-links {
//     .account-link {
//       display: flex;
//       align-items: center;
//       gap: var(--spacing-md);
//       padding: var(--spacing-md);
//       background: transparent;
//       border: none;
//       border-radius: var(--ui-border-radius-lg);
//       text-decoration: none;
//       cursor: pointer;
//       transition: all 0.2s ease;

//       &:hover {
//         background: var(--component-bg-hover);

//         .link-icon {
//           transform: scale(1.1);
//         }

//         .link-arrow {
//           transform: translateX(4px);
//         }
//       }

//       .link-icon {
//         width: 40px;
//         height: 40px;
//         border-radius: var(--ui-border-radius);
//         display: flex;
//         align-items: center;
//         justify-content: center;
//         font-size: 1.125rem;
//         transition: transform 0.2s ease;

//         &.profile { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
//         &.security { background: rgba(16, 185, 129, 0.1); color: #10b981; }
//         &.billing { background: rgba(139, 92, 246, 0.1); color: #8b5cf6; }
//       }

//       .link-content {
//         flex: 1;
//         display: flex;
//         flex-direction: column;
//         align-items: flex-start;

//         .link-title {
//           font-size: var(--font-size-sm);
//           font-weight: 600;
//           color: var(--text-primary);
//           margin-bottom: var(--spacing-xs);
//         }

//         .link-subtitle {
//           font-size: var(--font-size-xs);
//           color: var(--text-tertiary);
//         }
//       }

//       .link-arrow {
//         color: var(--text-tertiary);
//         transition: transform 0.2s ease;
//       }
//     }
//   }
// }

// /* Sign Out Button */
// .signout-btn {
//   width: 100%;
//   margin-top: var(--spacing-lg);
//   padding: var(--spacing-lg);
//   background: linear-gradient(135deg, var(--color-error) 0%, #dc2626 100%);
//   border: none;
//   border-radius: var(--ui-border-radius-lg);
//   color: white;
//   font-size: var(--font-size-md);
//   font-weight: 600;
//   cursor: pointer;
//   display: flex;
//   align-items: center;
//   justify-content: center;
//   gap: var(--spacing-sm);
//   transition: all 0.2s ease;
//   box-shadow: var(--shadow-md);

//   &:hover {
//     transform: translateY(-2px);
//     box-shadow: var(--shadow-lg);
//   }
// }

// /* Notifications Content */
// .notifications-content {
//   .notifications-header {
//     display: flex;
//     justify-content: space-between;
//     align-items: center;
//     margin-bottom: var(--spacing-lg);

//     h5 {
//       margin: 0;
//       font-size: var(--font-size-lg);
//       font-weight: 700;
//       color: var(--text-primary);
//     }

//     .notifications-actions {
//       display: flex;
//       gap: var(--spacing-sm);

//       .action-btn {
//         display: flex;
//         align-items: center;
//         gap: var(--spacing-xs);
//         padding: var(--spacing-xs) var(--spacing-sm);
//         background: var(--bg-ternary);
//         border: 1px solid var(--border-primary);
//         border-radius: var(--ui-border-radius);
//         color: var(--text-secondary);
//         font-size: var(--font-size-xs);
//         cursor: pointer;
//         transition: all 0.2s ease;

//         &:hover {
//           background: var(--component-bg-hover);
//           color: var(--text-primary);
//         }
//       }
//     }
//   }

//   .notifications-list {
//     .notification-item {
//       display: flex;
//       align-items: flex-start;
//       gap: var(--spacing-md);
//       padding: var(--spacing-lg);
//       background: var(--bg-secondary);
//       border-radius: var(--ui-border-radius-lg);
//       margin-bottom: var(--spacing-md);
//       border: 1px solid transparent;
//       transition: all 0.2s ease;
//       position: relative;

//       &:hover {
//         border-color: var(--border-secondary);
//         transform: translateY(-1px);
//         box-shadow: var(--shadow-sm);
//       }

//       &.unread {
//         background: linear-gradient(to right, rgba(var(--accent-primary), 0.05), var(--bg-secondary));
//         border-left: 3px solid var(--accent-primary);
//       }

//       .notification-icon {
//         width: 48px;
//         height: 48px;
//         border-radius: var(--ui-border-radius);
//         display: flex;
//         align-items: center;
//         justify-content: center;
//         font-size: 1.25rem;

//         &.info { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
//         &.success { background: rgba(16, 185, 129, 0.1); color: #10b981; }
//         &.warning { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
//         &.error { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
//       }

//       .notification-content {
//         flex: 1;
//         min-width: 0;

//         .notification-header {
//           display: flex;
//           justify-content: space-between;
//           align-items: center;
//           margin-bottom: var(--spacing-xs);

//           .notification-title {
//             font-size: var(--font-size-md);
//             font-weight: 600;
//             color: var(--text-primary);
//           }

//           .notification-time {
//             font-size: var(--font-size-xs);
//             color: var(--text-tertiary);
//           }
//         }

//         .notification-message {
//           margin: 0;
//           font-size: var(--font-size-sm);
//           color: var(--text-secondary);
//           line-height: 1.5;
//           display: -webkit-box;
//           -webkit-line-clamp: 2;
//           -webkit-box-orient: vertical;
//           overflow: hidden;
//         }
//       }

//       .unread-indicator {
//         width: 8px;
//         height: 8px;
//         border-radius: 50%;
//         background: var(--accent-primary);
//         position: absolute;
//         top: var(--spacing-md);
//         right: var(--spacing-md);
//         box-shadow: 0 0 0 2px var(--bg-secondary);
//       }
//     }

//     .empty-notifications {
//       text-align: center;
//       padding: var(--spacing-3xl) var(--spacing-xl);
//       background: var(--bg-secondary);
//       border-radius: var(--ui-border-radius-lg);
//       border: 2px dashed var(--border-primary);

//       i {
//         font-size: 3rem;
//         color: var(--text-muted);
//         margin-bottom: var(--spacing-lg);
//         opacity: 0.5;
//       }

//       h6 {
//         margin: 0 0 var(--spacing-xs);
//         font-size: var(--font-size-md);
//         font-weight: 700;
//         color: var(--text-primary);
//       }

//       p {
//         margin: 0;
//         font-size: var(--font-size-sm);
//         color: var(--text-tertiary);
//       }
//     }
//   }

//   .notifications-footer {
//     margin-top: var(--spacing-lg);
//     padding-top: var(--spacing-lg);
//     border-top: 1px solid var(--border-primary);

//     .view-all-link {
//       display: flex;
//       align-items: center;
//       justify-content: center;
//       gap: var(--spacing-xs);
//       color: var(--accent-primary);
//       text-decoration: none;
//       font-size: var(--font-size-sm);
//       font-weight: 600;
//       transition: all 0.2s ease;

//       &:hover {
//         gap: var(--spacing-sm);

//         i {
//           transform: translateX(3px);
//         }
//       }

//       i {
//         transition: transform 0.2s ease;
//       }
//     }
//   }
// }

// /* Animations */
// @keyframes pulse {
//   0%, 100% { transform: scale(1); }
//   50% { transform: scale(1.1); }
// }

// /* Responsive */
// @media (max-width: 768px) {
//   .header-inner {
//     padding: 0 var(--spacing-md);
//   }

//   .logo-link .logo-text {
//     display: none;
//   }

//   .user-meta {
//     display: none !important;
//   }

//   :host ::ng-deep .premium-popover-override {
//     min-width: calc(100vw - 40px) !important;
//     max-width: calc(100vw - 40px) !important;
    
//     .p-popover-content {
//       max-height: 80vh !important;
//     }
//   }

//   .theme-presets-grid {
//     grid-template-columns: repeat(3, 1fr) !important;
//   }

//   .accent-colors-grid {
//     grid-template-columns: repeat(4, 1fr) !important;
//   }
// }

// // /* ==========================================================================
// //    HEADER + POPOVER â€” THEME-SAFE FINAL SCSS
// //    Drop this into your header component SCSS (replace older popover/header rules)
// //    - Ensures fixed/same width, 16px rounded curves, theme tokens usage
// //    - Works with PrimeNG p-popover (styleClass="premium-popover-override")
// //    - Uses ::ng-deep where popover is appended to body
// //    ========================================================================== */

// // /* -------------------------
// //    POPOVER (PrimeNG) OVERRIDES
// //    ------------------------- */
// // /* ::ng-deep required because p-popover is appended to body */
// // :host ::ng-deep .premium-popover-override {
// //   /* Shell sizing & placement */
// //   min-width: 360px; /* same width you requested */
// //   width: 360px; /* force same width */
// //   max-width: calc(95vw); /* responsive fallback */
// //   border: none !important;
// //   background: transparent !important;
// //   margin-top: 10px !important;
// //   z-index: var(--z-tooltip, 700) !important; /* ensure above other UI */

// //   /* Remove arrow decorations for a clean floating pill */
// //   &.p-popover-top::after,
// //   &.p-popover-top::before,
// //   &.p-popover-bottom::after,
// //   &.p-popover-bottom::before {
// //     display: none !important;
// //   }

// //   /* Actual content area inside the popover */
// //   .p-popover-content {
// //     padding: 0 !important; /* we manage padding inside children */
// //     box-sizing: border-box !important;

// //     /* THEME TOKENS â€” force them so popover doesn't get camouflaged */
// //     background: var(--bg-secondary) !important;
// //     color: var(--text-primary) !important;

// //     /* Rounded curve and border */
// //     border-radius: 16px !important; /* your rounded curve */
// //     border: 1px solid var(--border-primary) !important;

// //     /* Depth consistent with tokens */
// //     box-shadow: var(--shadow-xl) !important;

// //     /* Prevent inner overflow clipping of radius */
// //     overflow: hidden !important;
// //   }
// // }

// // /* If PrimeNG renders a different wrapper class, catch it too */
// // :host ::ng-deep .premium-popover-override.p-overlaypanel,
// // :host ::ng-deep .premium-popover-override.p-overlay {
// //   min-width: 360px;
// //   width: 360px;
// //   max-width: calc(95vw);
// // }

// // /* -------------------------
// //    HEADER (Main)
// //    ------------------------- */
// // .header-inner {
// //   height: 56px; /* â¬…ï¸ perfect SaaS density */
// //   padding: 0 var(--spacing-xl);
// //   background: var(--bg-secondary);
// //   border-bottom: 1px solid var(--border-primary);
// //   display: flex;
// //   align-items: center;
// //   justify-content: space-between;
// // }

// // /* LEFT */
// // .header-left {
// //   display: flex;
// //   align-items: center;
// //   gap: 1rem;

// //   .menu-toggle-btn {
// //     width: 36px;
// //     height: 36px;
// //     border-radius: var(--ui-border-radius);
// //     border: none;
// //     background: transparent;
// //     color: var(--text-secondary);
// //     cursor: pointer;
// //     transition: var(--transition-fast);
// //     &:hover {
// //       background: var(--component-bg-hover);
// //       color: var(--text-primary);
// //     }
// //   }

// //   .logo-link {
// //     display: flex;
// //     align-items: center;
// //     gap: 0.75rem;
// //     text-decoration: none;
// //     font-weight: 700;
// //     color: var(--text-primary);

// //     .logo-icon {
// //       width: 32px;
// //       height: 32px;
// //       background: var(--accent-primary);
// //       border-radius: var(--ui-border-radius);
// //       display: flex;
// //       align-items: center;
// //       justify-content: center;
// //       color: #fff;
// //     }
// //   }
// // }
// // .logo-link svg {
// //   height: 32px; /* visual normalization */
// //   width: auto;
// //   display: block;
// // }

// // /* RIGHT */
// // .header-right {
// //   display: flex;
// //   align-items: center;
// //   gap: 1rem;

// //   .notification-btn {
// //     position: relative;
// //     width: 34px;
// //     height: 34px;
// //     border-radius: 50%;
// //     border: none;
// //     background: transparent;
// //     color: var(--text-secondary);
// //     cursor: pointer;
// //     transition: var(--transition-fast);
// //     &:hover {
// //       background: var(--component-bg-hover);
// //       color: var(--accent-primary);
// //     }
// //     &.has-new::after {
// //       content: '';
// //       position: absolute;
// //       top: 9px;
// //       right: 9px;
// //       width: 9px;
// //       height: 9px;
// //       background: var(--color-error);
// //       border-radius: 50%;
// //       border: 2px solid var(--bg-secondary);
// //     }
// //   }

// //   .user-profile-trigger {
// //     display: flex;
// //     align-items: center;
// //     gap: 0.75rem;
// //     padding: 2px 10px 2px 4px;
// //     min-height: 34px;
// //     border-radius: 99px;
// //     border: 1px solid transparent;
// //     background: transparent;
// //     cursor: pointer;
// //     transition: var(--transition-fast);
// //     &:hover {
// //       background: var(--component-bg-hover);
// //       border-color: var(--border-primary);
// //     }
// //     .user-meta {
// //       display: flex;
// //       flex-direction: column;
// //       .name {
// //         font-size: var(--font-size-sm);
// //         font-weight: 600;
// //         color: var(--text-primary);
// //       }
// //       .role {
// //         font-size: 0.7rem;
// //         color: var(--text-secondary);
// //       }
// //     }
// //   }
// // }

// // /* -------------------------
// //    POPOVER INTERNAL LAYOUT
// //    ------------------------- */
// // .popover-container {
// //   display: flex;
// //   flex-direction: column;
// //   width: 100%;
// //   box-sizing: border-box;
// // }

// // /* Tabs area (pills) */
// // .popover-tabs-container {
// //   padding: 1rem;
// // }
// // .popover-tabs {
// //   display: grid;
// //   grid-template-columns: 1fr 1fr;
// //   gap: 6px;
// //   padding: 4px;
// //   background: var(--bg-ternary);
// //   border-radius: 12px;
// //   border: 1px solid var(--border-primary);
// //   position: relative;
// //   isolation: isolate;

// //   .tab-slider {
// //     position: absolute;
// //     top: 4px;
// //     left: 4px;
// //     width: calc(50% - 4px);
// //     height: calc(100% - 8px);
// //     background: var(--bg-secondary);
// //     border-radius: 8px;
// //     box-shadow: var(--shadow-sm);
// //     transition: transform 0.18s ease;
// //     z-index: 0;
// //   }

// //   .tab-btn {
// //     position: relative;
// //     z-index: 1; /* above slider */
// //     padding: 8px;
// //     border: none;
// //     background: transparent;
// //     font-size: var(--font-size-sm);
// //     font-weight: 600;
// //     color: var(--text-secondary);
// //     cursor: pointer;
// //     display: flex;
// //     justify-content: center;
// //     align-items: center;
// //     gap: 8px;
// //     &.active {
// //       color: var(--text-primary);
// //     }
// //     .tab-badge {
// //       background: var(--color-error);
// //       color: #fff;
// //       padding: 0 6px;
// //       font-size: 0.7rem;
// //       border-radius: 10px;
// //       min-width: 18px;
// //       height: 16px;
// //       display: flex;
// //       align-items: center;
// //       justify-content: center;
// //     }
// //   }
// // }

// // /* User header inside popover */
// // .user-header {
// //   padding: 1.25rem 1.25rem;
// //   display: flex;
// //   gap: 1rem;
// //   align-items: center;
// //   background: transparent; /* parent (.p-popover-content) provides bg */
// //   border-bottom: 1px solid var(--border-primary);
// //   ::ng-deep .xl-avatar {
// //     width: 60px;
// //     height: 60px;
// //     font-size: 1.7rem;
// //     background: var(--accent-primary);
// //     color: #fff;
// //   }
// //   .user-details {
// //     h4 {
// //       margin: 0;
// //       font-size: var(--font-size-md);
// //       font-weight: 700;
// //       color: var(--text-primary);
// //     }
// //     span {
// //       font-size: var(--font-size-sm);
// //       color: var(--text-secondary);
// //     }
// //   }
// // }

// // /* Theme selector */
// // .theme-selector {
// //   padding: 1rem 1.25rem;
// //   .section-title {
// //     display: flex;
// //     justify-content: space-between;
// //     margin-bottom: 1rem;
// //     span {
// //       font-size: 0.75rem;
// //       font-weight: 700;
// //       text-transform: uppercase;
// //       color: var(--text-label);
// //     }
// //   }
// //   .theme-grid {
// //     display: grid;
// //     grid-template-columns: repeat(6, 1fr);
// //     gap: 8px;
// //     .theme-option {
// //       width: 100%;
// //       aspect-ratio: 1;
// //       border-radius: 8px;
// //       border: 1px solid var(--border-primary);
// //       display: flex;
// //       align-items: center;
// //       justify-content: center;
// //       cursor: pointer;
// //       transition: var(--transition-fast);
// //       &:hover {
// //         transform: translateY(-2px);
// //       }
// //       &.active {
// //         box-shadow: 0 0 0 2px var(--bg-secondary), 0 0 0 4px var(--accent-primary);
// //         border-color: transparent;
// //       }
// //       i {
// //         color: #fff;
// //         font-size: 0.9rem;
// //       }
// //     }
// //   }
// // }

// // /* Menu actions */
// // .menu-actions {
// //   padding: 0.75rem 1rem 1rem;
// //   display: flex;
// //   flex-direction: column;
// //   gap: 6px;
// //   border-top: 1px solid var(--border-primary);

// //   .menu-item {
// //     display: flex;
// //     gap: 1rem;
// //     align-items: center;
// //     padding: 0.75rem;
// //     border-radius: 12px;
// //     background: transparent;
// //     text-decoration: none;
// //     cursor: pointer;
// //     transition: var(--transition-fast);
// //     width: 100%;
// //     .icon-box {
// //       width: 36px;
// //       height: 36px;
// //       border-radius: 8px;
// //       background: var(--bg-ternary);
// //       display: flex;
// //       align-items: center;
// //       justify-content: center;
// //       color: var(--text-secondary);
// //     }
// //     .icon-box.danger {
// //       background: rgba(239, 68, 68, 0.08);
// //       color: var(--color-error);
// //     }
// //     .item-text {
// //       display: flex;
// //       flex-direction: column;
// //       .label {
// //         color: var(--text-primary);
// //         font-weight: 600;
// //       }
// //       .sub-label {
// //         color: var(--text-secondary);
// //         font-size: 0.7rem;
// //       }
// //     }
// //     .arrow {
// //       margin-left: auto;
// //       color: var(--text-secondary);
// //     }
// //     &:hover {
// //       background: var(--component-bg-hover);
// //       .icon-box {
// //         background: #fff;
// //         color: var(--accent-primary);
// //         box-shadow: var(--shadow-sm);
// //       }
// //       .icon-box.danger {
// //         background: var(--color-error);
// //         color: #fff;
// //       }
// //     }
// //   }
// // }

// // /* Notification wrapper (embedded component) */
// // .notification-wrapper {
// //   height: 400px;
// //   overflow-y: auto;
// //   ::ng-deep app-notification-bell {
// //     .notification-panel {
// //       background: transparent !important;
// //       border: none !important;
// //       box-shadow: none !important;
// //       padding: 0 !important;
// //     }
// //     .panel-header {
// //       display: none !important;
// //     }
// //     .panel-body {
// //       padding: 0 !important;
// //     }
// //   }
// // }

// // /* MOBILE: shrink popover width on very small screens */
// // @media (max-width: 420px) {
// //   :host ::ng-deep .premium-popover-override {
// //     width: calc(92vw) !important;
// //     min-width: unset !important;
// //     left: 4vw !important;
// //     right: 4vw !important;
// //   }
// // }
// // :host ::ng-deep .premium-popover-override .p-popover-content {
// //   max-height: min(80vh, 520px);
// // }
// // :host ::ng-deep .premium-notification-dialog .p-dialog {
// //   width: min(720px, 94vw);
// //   max-height: min(85vh, 720px);
// // }

// // :host ::ng-deep .premium-popover-override {
// //   border: none !important;
// //   box-shadow: none !important;
// //   background: transparent !important;
// // }
// // :host ::ng-deep .premium-popover-override .p-popover-content {
// //   padding: 0 !important;
// //   border-radius: 18px;
// //   overflow: hidden;

// //   /* Apple-style glass */
// //   background: rgba(255, 255, 255, 0.72);
// //   backdrop-filter: blur(22px) saturate(180%);
// //   -webkit-backdrop-filter: blur(22px) saturate(180%);

// //   /* Soft depth */
// //   box-shadow:
// //     0 20px 40px rgba(0, 0, 0, 0.12),
// //     0 1px 0 rgba(255, 255, 255, 0.6) inset;

// //   /* Size control */
// //   width: 360px;
// //   max-height: min(78vh, 560px);

// //   display: flex;
// // }
// // .popover-container {
// //   display: flex;
// //   flex-direction: column;
// //   width: 100%;
// //   height: 100%;
// // }

// // .popover-tabs-container {
// //   position: sticky;
// //   top: 0;
// //   z-index: 10;

// //   display: flex;
// //   gap: 6px;
// //   padding: 12px;

// //   background: rgba(255, 255, 255, 0.65);
// //   backdrop-filter: blur(18px);
// //   -webkit-backdrop-filter: blur(18px);

// //   border-bottom: 0.5px solid rgba(0, 0, 0, 0.08);
// // }

// // .popover-tab {
// //   flex: 1;
// //   padding: 8px 12px;

// //   font-size: 13px;
// //   font-weight: 500;
// //   text-align: center;

// //   border-radius: 10px;
// //   cursor: pointer;

// //   color: rgba(0, 0, 0, 0.65);
// //   transition: all 180ms cubic-bezier(0.2, 0, 0, 1);
// // }

// // .popover-tab.active {
// //   background: rgba(255, 255, 255, 0.9);
// //   color: #000;

// //   box-shadow:
// //     0 6px 14px rgba(0, 0, 0, 0.12),
// //     0 1px 0 rgba(255, 255, 255, 0.8) inset;
// // }
// // .popover-scroll-body {
// //   flex: 1;
// //   overflow-y: auto;
// //   overflow-x: hidden;

// //   padding: 16px 16px 20px;

// //   scroll-behavior: smooth;
// //   -webkit-overflow-scrolling: touch;
// // }
// // .popover-scroll-body::after {
// //   content: '';
// //   position: sticky;
// //   bottom: 0;
// //   display: block;
// //   height: 24px;

// //   background: linear-gradient(
// //     to bottom,
// //     rgba(255, 255, 255, 0),
// //     rgba(255, 255, 255, 0.8)
// //   );

// //   pointer-events: none;
// // }
// // .popover-scroll-body::-webkit-scrollbar {
// //   width: 6px;
// // }

// // .popover-scroll-body::-webkit-scrollbar-thumb {
// //   background: rgba(0, 0, 0, 0.25);
// //   border-radius: 10px;
// // }

// // .popover-scroll-body::-webkit-scrollbar-thumb:hover {
// //   background: rgba(0, 0, 0, 0.4);
// // }
// // .popover-item {
// //   padding: 14px 14px;
// //   border-radius: 14px;

// //   background: rgba(255, 255, 255, 0.6);
// //   box-shadow:
// //     0 1px 2px rgba(0, 0, 0, 0.06);

// //   margin-bottom: 10px;

// //   transition: transform 160ms ease, box-shadow 160ms ease;
// // }

// // .popover-item:hover {
// //   transform: translateY(-1px);
// //   box-shadow:
// //     0 6px 18px rgba(0, 0, 0, 0.12);
// // }
// // :host ::ng-deep .premium-popover-override {
// //   animation: apple-popover-in 220ms cubic-bezier(0.2, 0, 0, 1);
// // }

// // @keyframes apple-popover-in {
// //   from {
// //     opacity: 0;
// //     transform: translateY(6px) scale(0.98);
// //   }
// //   to {
// //     opacity: 1;
// //     transform: none;
// //   }
// // }
